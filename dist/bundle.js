!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Util=function(){function Util(){_classCallCheck(this,Util)}return _createClass(Util,null,[{key:"isString",value:function(e){return"string"==typeof e}},{key:"toArray",value:function(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}},{key:"isForIn",value:function(e){return/^\w* _in_ \w*$/.test(e)}},{key:"isForForIn",value:function(e){return/^\w* _in*$/.test(e)}},{key:"isForOrForFor",value:function(e){return/^\w* _in_ \w|_in*$/.test(e)}},{key:"isIgnoreChildren",value:function(e){return e.props&&e.props.hasOwnProperty("ignore")}},{key:"isNumber",value:function(e){if(null==e||""===e)return!1;if("string"==typeof e){return!!(/^\d+$/.test(e)||/^-\d+$/.test(e)||/^[1-9]\d*[.]\d+$/.test(e)||/^0[.]\d+$/.test(e)||/^-[1-9]\d*[.]\d+$/.test(e)||/^-0[.]\d+$/.test(e))}return"number"==typeof e}},{key:"setAttr",value:function(e,t,n){switch(t){case"style":e.style.cssText=n;break;case"value":var r=e.tagName||"";"input"===(r=r.toLowerCase())||"textarea"===r?e.value=n:e.setAttribute(t,n);break;default:e.setAttribute(t,n)}}},{key:"isPlaceHolder",value:function(e){return!!e&&!!/^%#\w*.\w*#%$/.test(e)}},{key:"isDotOperatorExpression",value:function(e){return/^\w*\.\w*$/.test(e)}},{key:"getPlaceHolderValue",value:function(e){return e.slice(2,-2)}},{key:"isOperatorExpression",value:function(e){return!!Util.isString(e)&&!!/^\{\w*|\|\%+\}$/.test(e)}},{key:"getOperatorExpression",value:function getOperatorExpression(content,data,dataKey){if(Util.isString(content)){var expression=content.slice(content.indexOf("{")+1,content.indexOf("}")),startIndex=expression.indexOf("%#"),endIndex=expression.indexOf("#%")+2;if(-1!=startIndex&&-1!=endIndex&&startIndex<endIndex){var placeHolder=expression.slice(startIndex,endIndex),realValue=void 0;if(placeHolder.indexOf(".")>0){if(Util.getPlaceHolderValue(placeHolder).split(".")[0]===dataKey){var placeHolderValue=data[Util.getPlaceHolderValue(placeHolder).split(".")[1]];realValue=Util.isNumber(placeHolderValue)?placeHolderValue:'"'+placeHolderValue+'"'}}else realValue=data[Util.getPlaceHolderValue(placeHolder)];expression=expression.replace(placeHolder,realValue)}return eval(expression)}}}]),Util}();exports.default=Util},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.length=0,this.map=new Object}return r(e,[{key:"put",value:function(e,t){e in this.map||this.length++,this.map[e]=t}},{key:"get",value:function(e){return e in this.map?this.map[e]:null}},{key:"remove",value:function(e){e in this.map&&(delete this.map[e],this.length--)}},{key:"hasKey",value:function(e){return e in this.map}},{key:"forEach",value:function(e){var t=this;Object.keys(this.map).forEach(function(n){e(t.map[n])})}},{key:"size",value:function(){return this.length}},{key:"clear",value:function(){length=0,this.map=new Object}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NODE_REPLACE=0,t.CHILD_RE_ORDER=1,t.NODE_PROPS=2,t.NODE_CONTENT=3},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=(r=a)&&r.__esModule?r:{default:r};var l=function(){function e(t,n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(this instanceof e))return new e(tagName,n,r);if(this.tag=t,this.props=n||{},this.children=r||[],this.key=n?n.key:void 0,!this.key)throw new Error(t+" ... html tag the key is undefined");var i=0;this.children.forEach(function(t){t instanceof e&&(i+=t.count),i++}),this.count=i}return i(e,[{key:"render",value:function(){var t=document.createElement(this.tag),n=this.props;for(var r in n)o.default.setAttr(t,r,n[r]);return this.children.forEach(function(n){var r=n instanceof e?n.render():document.createTextNode(n);t.appendChild(r)}),t}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(0)),a=o(n(3));function o(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t}return r(e,[{key:"getVirtualElement",value:function(e){var t=this,n=[];for(var r in e.children){var i=e.children[r];if(i instanceof Array)i.forEach(function(e){var r=t.getVirtualElement(e);n.push(r)});else if(i instanceof Object){var o=this.getVirtualElement(i);n.push(o)}else n.push(i)}return new a.default(e.tag,e.props,n)}},{key:"applyTruthfulData",value:function(e){var t=this;if("for"in e.props){var n=[],r=void 0;if(!i.default.isForIn(e.props.for))throw new Error("the for directive use error");"childDomDatakey"in e?(n=e.data,r=e.childDomDatakey):"domDataKey"in e?(e.props.for.split(" _in_ ")[1]===e.domDataKey&&(n=e.data),r=e.props.for.split(" _in_ ")[0]):(n=this.data[e.props.for.split(" _in_ ")[1]],r=e.props.for.split(" _in_ ")[0]);var a=[];return n.forEach(function(n){var i=t.vdom2rdom(e,n,r,n);a.push(i)}),a}var o=void 0,l=void 0;return"data"in e?(o=e.data,l=e.childDomDatakey):(o=this.data,l=void 0),this.vdom2rdom(e,o,l,o)}},{key:"vdom2rdom",value:function(e,t,n,r){var a={};a.tag=e.tag,a.children=[],a.props={};var o=Object.keys(e.props);for(var l in o){var u=o[l];if("style"===u){var s=e.props[u];if(s.indexOf(",")>-1){var c=s.split(",");a.props[u]=this.handleArrayStyle(t,c,n)}else a.props[u]=this.handleSingleStyle(t,s,n)}else i.default.isPlaceHolder(e.props[u])?i.default.isDotOperatorExpression(i.default.getPlaceHolderValue(e.props[u]))?a.props[u]=t[i.default.getPlaceHolderValue(e.props[u]).split(".")[1]]:a.props[u]=r[i.default.getPlaceHolderValue(e.props[u])]:i.default.isOperatorExpression(e.props[u])?a.props[u]=i.default.getOperatorExpression(e.props[u],t,n):a.props[u]=e.props[u]}for(var d in e.children)i.default.isString(e.children[d])?i.default.isPlaceHolder(e.children[d])?-1==i.default.getPlaceHolderValue(e.children[d]).indexOf(n)?a.children[d]=r[i.default.getPlaceHolderValue(e.children[d])]:a.children[d]=t[i.default.getPlaceHolderValue(e.children[d]).split(".")[1]]:a.children[d]=e.children[d]:(e.children[d]instanceof Object&&("childDomData"in e.props?(e.children[d].childDomDatakey=e.props.childDomData,e.children[d].data=t):"domData"in e.props&&(e.children[d].domDataKey=e.props.domData,e.children[d].data=t[d]),e.children[d].data=t),a.children[d]=this.applyTruthfulData(e.children[d]));return a}},{key:"handleSingleStyle",value:function(e,t,n){var r="";if(n)if(i.default.isPlaceHolder(t))if(-1!=i.default.getPlaceHolderValue(t).indexOf(n)){r=e[i.default.getPlaceHolderValue(t).split(".")[1]]}else{var a=t.split(":")[0],o=t.split(":")[1];r=a+":"+(o=e[i.default.getPlaceHolderValue(o)])}else r=t;else{var l=t.split(":")[0],u=t.split(":")[1];r=i.default.isPlaceHolder(u)?l+":"+(u=e[i.default.getPlaceHolderValue(u)]):t}return r}},{key:"handleArrayStyle",value:function(e,t,n){var r="",i=!0,a=!1,o=void 0;try{for(var l,u=t[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var s=l.value;r+=this.handleSingleStyle(e,s,n)+";"}}catch(e){a=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw o}}return r}}]),e}();t.default=l},function(e,t,n){"use strict";var r,i=n(6),a=(r=i)&&r.__esModule?r:{default:r};var o=void 0,l={parent:"parent",child:"child",pcolor:"red",c1color:"blue",c2color:"green",child2:"child2",time:1e4,pkey:"dddd",componentColor:"red",componentCotent:"componentCotent 888",componentValue:"componentValue 888",week:[{id:11,content:"111"},{id:22,content:"222"},{id:33,content:"333"}]};window.data=l,window.RV=a.default,window.onload=function(){var e=a.default.component({name:"MyComponent",template:'\n            <div class="aaa" key="aaa"><p key="bbb" class="bbb" style="color:%#pcolor#%" time="%#time#%" componentValue="%#pvalue#%">"%#pcontent#%"</p><div>\n        ',style:"\n        .aaa {\n            background-color: red\n        }\n        .bbb {\n            width: 500px;\n            height:200px;\n        }\n        ",props:{time:"1000",content:"a custom component",value:"componentValue"},data:{pcontent:"a custom component",pcolor:"yellow",time:1e4,pvalue:"cvalue"},run:function(){var e=this,t=["red","green","blue","yellow","gray","white","black"];setInterval(function(){var n;e.data.pcontent=e.props.content,e.data.time=e.props.time,e.data.pvalue=e.props.value,e.data.pcolor=t[(n=6,Math.floor(Math.random()*Math.floor(n)))]},1e3)},watch:{pcolor:function(){console.log("pcolorChange,change:")}}});(o=new a.default({el:"#app",data:l,template:'<div key="1" style="color:%#pcolor#%,width:100px,height:100px" onclick="clickDiv()">\n                         "%#parent#%"\n                         <p key="2" style="color:%#c1color#%,width:50px,height:50px" onclick="clickP1()">\n                             "%#child#%"\n                         </p>\n                         <p key="3" style="color:%#c2color#%,width:50px,height:50px" onclick="clickP2()">\n                            "%#child2#%"\n                         </p>\n                         <div key="4">\n                            <p key="{%#v.id#%+\'_content\'}" childDomData="v" for="v _in_ week"  domData="week">"%#v.content#%"</p>\n                         </div>\n                         <MyComponent content="%#componentCotent#%"  time="{Math.floor(new Date()/1000)+\'_ttt\'}" value="%#componentValue#%" key="888"></MyComponent>\n                       </div>'})).use(e),o.run(),o.watch("parent",function(){alert("parent,change")}),o.watch("child",function(){alert("child,change")}),o.watch("child2",function(){alert("child2,change")}),window.clickDiv=function(){o.data.parent="click Div time:"+new Date/1e3},window.clickP1=function(){o.data.child="click p1 time:"+new Date/1e3},window.clickP2=function(){o.data.child2="click p2 time:"+new Date/1e3},window.rv=o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=d(n(0)),a=d(n(7)),o=d(n(8)),l=(d(n(3)),d(n(10))),u=d(n(4)),s=d(n(11)),c=d(n(1));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=function(){function e(t){f(this,e);var n=t.el,r=t.data,i=t.template;this.el=n,this.data=r,this.template=i,this.observeMap=new c.default,this.parse=new l.default,this.rvDomUtil=new u.default(this.data)}return r(e,[{key:"use",value:function(e){this.parse.useCustomComponent(e)}},{key:"run",value:function(){var e=this,t=i.default.isString(this.el)?document.querySelector(this.el):this.el,n=this._getDomTree(),r=this;this.parse.componetMap.forEach(function(e){h(e.data,e.observeMap,function(){n=r._getDomTree(),r._updatedom(n)}),Object.keys(e.watchObj).forEach(function(t){e.observeMap.hasKey(t)&&e.observeMap.get(t).add(function(){e.watchObj[t](),e.applyTruthFulData()})}),e.run()}),this.ve=this.rvDomUtil.getVirtualElement(this.rvDomUtil.applyTruthfulData(n)),this.w=this.ve.render(),t.appendChild(this.w),h(this.data,this.observeMap,function(){e._updatedom(n)}),this._updatedom(n)}},{key:"_getDomTree",value:function(){try{this.parse.parseHtmlTemplate(this.template.trim())}catch(e){console.error("rv parse e:"+e)}return this.parse.getHtmlDom()}},{key:"_updatedom",value:function(e){var t,n,r,i,l=this.rvDomUtil.getVirtualElement(this.rvDomUtil.applyTruthfulData(e));window.nve=l,window.ve=this.ve,t=this.w,r=this.ve,i=l,n=new o.default(r,i).patches,new a.default(t,n),this.ve=l}},{key:"watch",value:function(e,t){this.observeMap.hasKey(e)&&this.observeMap.get(e).add(t)}}],[{key:"component",value:function(e){var t=e.name,n=e.template,r=e.style,i=e.props,a=e.data,o=new l.default;o.parseHtmlTemplate(n.trim());var u=o.getHtmlDom();return new s.default({dom:u,style:r,props:i,name:t,data:a,run:e.run,watch:e.watch})}}]),e}();function h(e,t,n){return Object.keys(e).forEach(function(r){var i=e[r],a=new v;i instanceof Object&&h(i,t,n),t.put(r,a),Object.defineProperty(e,r,{get:function(){return a.add(n),i},set:function(e){var t=i!==e;i=e,t&&a.invoke()}})}),e}var v=function(){function e(){f(this,e),this.updateFunctions=new Set}return r(e,[{key:"add",value:function(e){this.updateFunctions.add(e)}},{key:"invoke",value:function(){this.updateFunctions.forEach(function(e){return e()})}}]),e}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=(r=a)&&r.__esModule?r:{default:r},l=n(2);var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.dfsWalk(t,{index:0},n)}return i(e,[{key:"dfsWalk",value:function(e,t,n){for(var r=n[t.index],i=e.childNodes?e.childNodes.length:0,a=0;a<i;a++){var o=e.childNodes[a];t.index++,this.dfsWalk(o,t,n)}r&&this.applyPatches(e,r)}},{key:"applyPatches",value:function(e,t){var n=this;t.forEach(function(t){switch(t.type){case l.NODE_REPLACE:var r=o.default.isString(t.node)?document.createTextNode(t.node):t.node.render();e.parentNode.replaceChild(r,e);break;case l.CHILD_RE_ORDER:n.reorderChildren(e,t.moves);break;case l.NODE_PROPS:n.setProps(e,t.props);break;case l.NODE_CONTENT:e.textContent?e.textContent=t.content:e.nodeValue=t.content}})}},{key:"reorderChildren",value:function(e,t){var n=o.default.toArray(e.childNodes),r={};n.forEach(function(e){if(1===e.nodeType){var t=e.getAttribute("key");t&&(r[t]=e)}}),t.forEach(function(t){var i=t.index;if(0===t.type)n[i]===e.childNodes[i]&&e.removeChild(e.childNodes[i]),n.splice(i,1);else if(1===t.type){var a=r[t.item.key]?r(t.item.key).cloneNode(!0):o.default.isString(t.item)?document.createTextNode(t.item):t.item.render();n.splice(i,0,a),e.insertBefore(a,e.childNodes[i]||null)}})}},{key:"setProps",value:function(e,t){for(var n in t)if(void 0===t[n])e.removeAttribute(n);else{var r=t[n];o.default.setAttr(e,n,r)}}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(n(9)),a=l(n(0)),o=n(2);function l(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.index=0,this.patches={},this.dfsWalk(t,n,this.index)}return r(e,[{key:"dfsWalk",value:function(e,t,n){var r=[];if(null==t);else if(a.default.isString(e)&&a.default.isString(t))e!=t&&r.push({type:o.NODE_CONTENT,content:t});else if(e.tagName===t.tagName&&e.key==t.key){var i=this.diffProps(e,t);i&&r.push({type:o.NODE_PROPS,props:i}),a.default.isIgnoreChildren(t)||this.diffChildren(e.children,t.children,n,r)}else r.push({type:o.NODE_REPLACE,node:t});r.length&&(this.patches[n]=r)}},{key:"diffProps",value:function(e,t){var n=e.props,r=t.props,i={},a=!0;for(var o in n)r[o]!==n[o]&&(a=!1,i[o]=r[o]);for(var l in r)n.hasOwnProperty(l)||(a=!1,i[l]=r[l]);return a?null:i}},{key:"diffChildren",value:function(e,t,n,r){var a=this,l=new i.default(e,t).getResult();if(t=l.child,l.moves.length){var u={type:o.CHILD_RE_ORDER,moves:l.moves};r.push(u)}var s=null,c=n;e.forEach(function(e,n){var r=t[n];c=s&&s.count?c+s.count+1:c+1,a.dfsWalk(e,r,c),s=e})}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=this.makeKeyIndex(t).keyIndex,i=this.makeKeyIndex(n).keyIndex;this.moveOperator=[],this.childList=[];for(var a=0;a<t.length;a++){var o=t[a],l=this.getKey(o);i.hasOwnProperty(l)?this.childList.push(n[i[l]]):this.childList.push(null)}this.tempList=this.childList.slice(0);for(var u=0;u<this.tempList.length;)null===this.tempList[u]?(this.remove(u),this.removeCopyTempList(u)):u++;for(var s=0,c=0;c<n.length;c++){var d=n[c],f=this.getKey(d),p=this.tempList[s],h=this.getKey(p);if(p)if(f!=h)if(r.hasOwnProperty(f))f===getKey(this.tempList[s+1])?(this.remove(c),this.removeCopyTempList(s),s++):this.insert(c,d);else this.insert(c,d);else s++;else this.insert(c,d)}for(var v=this.tempList.length-s;s++<this.tempList.length;)v--,this.remove(v+n.length)}return r(e,[{key:"makeKeyIndex",value:function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];t[this.getKey(r)]=n}return{keyIndex:t}}},{key:"getKey",value:function(e){if(e)return e.key}},{key:"removeCopyTempList",value:function(e){this.tempList.splice(e,1)}},{key:"remove",value:function(e){this.moveOperator.push({index:e,type:0})}},{key:"insert",value:function(e,t){this.moveOperator.push({index:e,item:t,type:1})}},{key:"getResult",value:function(){return{moves:this.moveOperator,child:this.childList}}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),o=(r=a)&&r.__esModule?r:{default:r};var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.componetMap=new o.default,this.mIndex=0,this.mMap=new o.default,this.mPropRe=/([^=\s]+)(\s*=\s*((\"([^"]*)\")|(\'([^']*)\')|[^>\s]+))?/gm,this.mHandler={startELement:function(e,t,n,r){if(r.mIndex+=1,r.componetMap.hasKey(e))r.componetMap.get(e).apply(t),r.mMap.put(r.mIndex,r.componetMap.get(e).getDom());else{var i={tag:e,props:t,children:[],index:r.mIndex,content:n,isClose:!1};n.length>0&&i.children.push(n.trim()),r.mMap.put(r.mIndex,i)}},endElement:function(e){e.mMap.get(e.mIndex).isClose=!0,e.mMap.hasKey(e.mIndex-1)&&(e.mMap.get(e.mIndex-1).children.push(e.mMap.get(e.mIndex)),e.mMap.remove(e.mIndex)),e.mIndex-=1}}}return i(e,[{key:"useCustomComponent",value:function(e){this.componetMap.put(e.getName(),e)}},{key:"parseHtmlTemplate",value:function(e){new Date;for(var t=0;e;){var n=e.indexOf("<"),r=e.indexOf(">")||e.indexOf("/>"),i=e.indexOf("</"),a=e.indexOf(">"),o=e.indexOf("\x3c!--"),l=e.indexOf("--\x3e");if(0==o&&-1!=l&&l>o)t=l+3,e.substring(o+4,l+3),e=e.substring(t);else if(-1!=i&&-1!=a&&a>i)t=a+1,c(e.substring(i,a+1),this),e=e.substring(t);else if(-1!=n&&-1!=r&&r>n){t=r+1;var u="";e.indexOf("<",t)>-1&&e.indexOf("<",t)>r&&(u=e.substring(t,e.indexOf("<",t)).trim()),s(e.substring(n,r+1),u,this),e=e.substring(t)}else;}new Date;function s(e,t,n){var r=-1!=e.indexOf(" ")?e.indexOf(" "):-1==e.indexOf("/>")?e.indexOf(">"):e.indexOf("/>"),i=e.substring(e.indexOf("<")+1,r),a={};if(e.indexOf(" ")>-1)for(var o=e.substring(e.indexOf(" ")+1,e.indexOf(">")).match(n.mPropRe),l=0;l<o.length;l++){var u=o[l];a[u.split("=")[0]]=u.split("=")[1].match(/(?<=").*?(?=")/)[0]}n.mHandler&&(/(?<=").*?(?=")/.test(t)&&(t=t.match(/(?<=").*?(?=")/)[0]),n.mHandler.startELement(i,a,t,n))}function c(e,t){t.mHandler&&t.mHandler.endElement(t)}}},{key:"getHtmlDom",value:function(){return this.mMap.get(1)}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(4)),a=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.dom,r=t.style,o=t.props,l=t.name,u=t.data,s=t.run,c=t.watch;this.dom=n,this.style=r,this.rdom=this.rdom,this.props=o,this.name=l,this.data=u,this.componentRun=s,this.rvDomUtil=new i.default(u),this.observeMap=new a.default,this.watchObj=c,this.addStyle2Head(this.style),this.applyTruthFulData()}return r(e,[{key:"addStyle2Head",value:function(e){var t=document.createElement("style");t.type="text/css";try{t.appendChild(document.createTextNode(e))}catch(n){console.error("component style,"+n),t.stylesheet.cssText=e}document.getElementsByTagName("head")[0].appendChild(t)}},{key:"applyTruthFulData",value:function(){this.rdom=this.rvDomUtil.applyTruthfulData(this.dom)}},{key:"run",value:function(){this.componentRun.call(this)}},{key:"getName",value:function(){return this.name}},{key:"apply",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=Object.keys(this.props)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;e[o]&&(this.props[o]=e[o])}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}},{key:"childContent",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=e.children[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)children=a.value,Util.isString(children)?Util.isPlaceHolder(children)&&(value=t[Util.getPlaceHolderValue(children)]):this.childContent(children)}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"getDom",value:function(){return this.rdom}},{key:"getProp",value:function(){return this.props}}]),e}();t.default=l}]);