!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var NODE_REPLACE=0,CHILD_RE_ORDER=1,NODE_PROPS=2,NODE_CONTENT=3,Element=function(){function e(t,n,r){if(_classCallCheck(this,e),!(this instanceof e))return new e(tagName,n,r);if(this.tag=t,this.props=n||{},this.children=r||[],this.key=n?n.key:void 0,!this.key)throw new Error(t+" ... html tag the key is undefined");var i=0;this.children.forEach(function(t){t instanceof e&&(i+=t.count),i++}),this.count=i}return _createClass(e,[{key:"render",value:function(){var t=document.createElement(this.tag),n=this.props;for(var r in n)Util.setAttr(t,r,n[r]);return this.children.forEach(function(n){var r=n instanceof e?n.render():document.createTextNode(n);t.appendChild(r)}),t}}]),e}(),Diff=function(){function e(t,n){_classCallCheck(this,e),this.index=0,this.patches={},this.dfsWalk(t,n,this.index)}return _createClass(e,[{key:"dfsWalk",value:function(e,t,n){var r=[];if(null==t);else if(Util.isString(e)&&Util.isString(t))e!=t&&r.push({type:NODE_CONTENT,content:t});else if(e.tagName===t.tagName&&e.key==t.key){var i=this.diffProps(e,t);i&&r.push({type:NODE_PROPS,props:i}),Util.isIgnoreChildren(t)||this.diffChildren(e.children,t.children,n,r)}else r.push({type:NODE_REPLACE,node:t});r.length&&(this.patches[n]=r)}},{key:"diffProps",value:function(e,t){var n=e.props,r=t.props,i={},a=!0;for(var s in n)r[s]!==n[s]&&(a=!1,i[s]=r[s]);for(var o in r)n.hasOwnProperty(o)||(a=!1,i[o]=r[o]);return a?null:i}},{key:"diffChildren",value:function(e,t,n,r){var i=this,a=new DiffList(e,t).getResult();if(t=a.child,a.moves.length){var s={type:CHILD_RE_ORDER,moves:a.moves};r.push(s)}var o=null,l=n;e.forEach(function(e,n){var r=t[n];l=o&&o.count?l+o.count+1:l+1,i.dfsWalk(e,r,l),o=e})}}]),e}(),Patch=function(){function e(t,n){_classCallCheck(this,e);this.dfsWalk(t,{index:0},n)}return _createClass(e,[{key:"dfsWalk",value:function(e,t,n){for(var r=n[t.index],i=e.childNodes?e.childNodes.length:0,a=0;a<i;a++){var s=e.childNodes[a];t.index++,this.dfsWalk(s,t,n)}r&&this.applyPatches(e,r)}},{key:"applyPatches",value:function(e,t){var n=this;t.forEach(function(t){switch(t.type){case NODE_REPLACE:var r=Util.isString(t.node)?document.createTextNode(t.node):t.node.render();e.parentNode.replaceChild(r,e);break;case CHILD_RE_ORDER:n.reorderChildren(e,t.moves);break;case NODE_PROPS:n.setProps(e,t.props);break;case NODE_CONTENT:e.textContent?e.textContent=t.content:e.nodeValue=t.content}})}},{key:"reorderChildren",value:function(e,t){var n=Util.toArray(e.childNodes),r={};n.forEach(function(e){if(1===e.nodeType){var t=e.getAttribute("key");t&&(r[t]=e)}}),t.forEach(function(t){var i=t.index;if(0===t.type)n[i]===e.childNodes[i]&&e.removeChild(e.childNodes[i]),n.splice(i,1);else if(1===t.type){var a=r[t.item.key]?r(t.item.key).cloneNode(!0):Util.isString(t.item)?document.createTextNode(t.item):t.item.render();n.splice(i,0,a),e.insertBefore(a,e.childNodes[i]||null)}})}},{key:"setProps",value:function(e,t){for(var n in t)if(void 0===t[n])e.removeAttribute(n);else{var r=t[n];Util.setAttr(e,n,r)}}}]),e}(),Util=function(){function Util(){_classCallCheck(this,Util)}return _createClass(Util,null,[{key:"isString",value:function(e){return"string"==typeof e}},{key:"toArray",value:function(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}},{key:"isForIn",value:function(e){return/^\w* _in_ \w*$/.test(e)}},{key:"isForForIn",value:function(e){return/^\w* _in*$/.test(e)}},{key:"isForOrForFor",value:function(e){return/^\w* _in_ \w|_in*$/.test(e)}},{key:"isIgnoreChildren",value:function(e){return e.props&&e.props.hasOwnProperty("ignore")}},{key:"isNumber",value:function(e){if(null==e||""===e)return!1;if("string"==typeof e){return!!(/^\d+$/.test(e)||/^-\d+$/.test(e)||/^[1-9]\d*[.]\d+$/.test(e)||/^0[.]\d+$/.test(e)||/^-[1-9]\d*[.]\d+$/.test(e)||/^-0[.]\d+$/.test(e))}return"number"==typeof e}},{key:"setAttr",value:function(e,t,n){switch(t){case"style":e.style.cssText=n;break;case"value":var r=e.tagName||"";"input"===(r=r.toLowerCase())||"textarea"===r?e.value=n:e.setAttribute(t,n);break;default:e.setAttribute(t,n)}}},{key:"isPlaceHolder",value:function(e){return!!e&&!!/^%#\w*.\w*#%$/.test(e)}},{key:"isDotOperatorExpression",value:function(e){return/^\w*\.\w*$/.test(e)}},{key:"getPlaceHolderValue",value:function(e){return e.slice(2,-2)}},{key:"isOperatorExpression",value:function(e){return!!Util.isString(e)&&!!/^\{\w*|\|\%+\}$/.test(e)}},{key:"getOperatorExpression",value:function getOperatorExpression(content,data,dataKey){if(Util.isString(content)){var expression=content.slice(content.indexOf("{")+1,content.indexOf("}")),startIndex=expression.indexOf("%#"),endIndex=expression.indexOf("#%")+2;if(-1!=startIndex&&-1!=endIndex&&startIndex<endIndex){var placeHolder=expression.slice(startIndex,endIndex),realValue=void 0;if(placeHolder.indexOf(".")>0){if(Util.getPlaceHolderValue(placeHolder).split(".")[0]===dataKey){var placeHolderValue=data[Util.getPlaceHolderValue(placeHolder).split(".")[1]];realValue=Util.isNumber(placeHolderValue)?placeHolderValue:'"'+placeHolderValue+'"'}}else realValue=data[Util.getPlaceHolderValue(placeHolder)];expression=expression.replace(placeHolder,realValue)}return eval(expression)}}}]),Util}(),DiffList=function(){function e(t,n){_classCallCheck(this,e);var r=this.makeKeyIndex(t).keyIndex,i=this.makeKeyIndex(n).keyIndex;this.moveOperator=[],this.childList=[];for(var a=0;a<t.length;a++){var s=t[a],o=this.getKey(s);i.hasOwnProperty(o)?this.childList.push(n[i[o]]):this.childList.push(null)}this.tempList=this.childList.slice(0);for(var l=0;l<this.tempList.length;)null===this.tempList[l]?(this.remove(l),this.removeCopyTempList(l)):l++;for(var u=0,c=0;c<n.length;c++){var p=n[c],h=this.getKey(p),d=this.tempList[u],f=this.getKey(d);if(d)if(h!=f)if(r.hasOwnProperty(h))h===getKey(this.tempList[u+1])?(this.remove(c),this.removeCopyTempList(u),u++):this.insert(c,p);else this.insert(c,p);else u++;else this.insert(c,p)}for(var v=this.tempList.length-u;u++<this.tempList.length;)v--,this.remove(v+n.length)}return _createClass(e,[{key:"makeKeyIndex",value:function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];t[this.getKey(r)]=n}return{keyIndex:t}}},{key:"getKey",value:function(e){if(e)return e.key}},{key:"removeCopyTempList",value:function(e){this.tempList.splice(e,1)}},{key:"remove",value:function(e){this.moveOperator.push({index:e,type:0})}},{key:"insert",value:function(e,t){this.moveOperator.push({index:e,item:t,type:1})}},{key:"getResult",value:function(){return{moves:this.moveOperator,child:this.childList}}}]),e}();function observe(e,t,n){return Object.keys(e).forEach(function(r){var i=e[r],a=new Observable;i instanceof Object&&observe(i,t,n),t.put(r,a),Object.defineProperty(e,r,{get:function(){return a.add(n),i},set:function(e){var t=i!==e;i=e,t&&a.invoke()}})}),e}var Observable=function(){function e(){_classCallCheck(this,e),this.updateFunctions=new Set}return _createClass(e,[{key:"add",value:function(e){this.updateFunctions.add(e)}},{key:"invoke",value:function(){this.updateFunctions.forEach(function(e){return e()})}}]),e}();function clone(e){var t=function(e){return null===e?"null":void 0===e?"undefined":Object.prototype.toString.call(e).slice(8,-1)},n=void 0,r=t(e);if("Object"===r)n={};else{if("Array"!==r)return e;n=[]}for(key in e){var i=e[key];"Object"==t(i)?n[key]=arguments.callee(i):"Array"==t(i)?n[key]=arguments.callee(i):n[key]=e[key]}return n}function h(e,t,n){return new Element(e,t,n)}function diff(e,t){return new Diff(e,t).patches}function patch(e,t){return new Patch(e,t)}var Map=function(){function e(){_classCallCheck(this,e),this.length=0,this.map=new Object}return _createClass(e,[{key:"put",value:function(e,t){e in this.map||this.length++,this.map[e]=t}},{key:"get",value:function(e){return e in this.map?this.map[e]:null}},{key:"remove",value:function(e){e in this.map&&(delete this.map[e],this.length--)}},{key:"hasKey",value:function(e){return e in this.map}},{key:"forEach",value:function(e){var t=this;Object.keys(this.map).forEach(function(n){e(t.map[n])})}},{key:"size",value:function(){return this.length}},{key:"clear",value:function(){length=0,this.map=new Object}}]),e}(),YhmParse=function(){function e(){_classCallCheck(this,e),this.componetMap=new Map,this.mIndex=0,this.mMap=new Map,this.mPropRe=/([^=\s]+)(\s*=\s*((\"([^"]*)\")|(\'([^']*)\')|[^>\s]+))?/gm,this.mHandler={startELement:function(e,t,n,r){if(r.mIndex+=1,r.componetMap.hasKey(e))console.log("con,prop:"+JSON.stringify(r.componetMap.get(e).getProp())),console.log("con,dom:"+JSON.stringify(r.componetMap.get(e).getDom())),console.log("tagName:"+e+" ,prop:"+JSON.stringify(t)),r.componetMap.get(e).apply(t),r.mMap.put(r.mIndex,r.componetMap.get(e).getDom());else{var i={tag:e,props:t,children:[],index:r.mIndex,content:n,isClose:!1};n.length>0&&i.children.push(n.trim()),r.mMap.put(r.mIndex,i)}},endElement:function(e){e.mMap.get(e.mIndex).isClose=!0,e.mMap.hasKey(e.mIndex-1)&&(e.mMap.get(e.mIndex-1).children.push(e.mMap.get(e.mIndex)),e.mMap.remove(e.mIndex)),e.mIndex-=1}}}return _createClass(e,[{key:"useCustomComponent",value:function(e){this.componetMap.put(e.getName(),e)}},{key:"parseHtmlTemplate",value:function(e){for(var t=new Date/1e3,n=0;e;){var r=e.indexOf("<"),i=e.indexOf(">")||e.indexOf("/>"),a=e.indexOf("</"),s=e.indexOf(">"),o=e.indexOf("\x3c!--"),l=e.indexOf("--\x3e");if(0==o&&-1!=l&&l>o)n=l+3,e.substring(o+4,l+3),e=e.substring(n);else if(-1!=a&&-1!=s&&s>a)n=s+1,h(e.substring(a,s+1),this),e=e.substring(n);else if(-1!=r&&-1!=i&&i>r){n=i+1;var u="";e.indexOf("<",n)>-1&&e.indexOf("<",n)>i&&(u=e.substring(n,e.indexOf("<",n)).trim()),p(e.substring(r,i+1),u,this),e=e.substring(n)}else;}var c=new Date/1e3;function p(e,t,n){var r=-1!=e.indexOf(" ")?e.indexOf(" "):-1==e.indexOf("/>")?e.indexOf(">"):e.indexOf("/>"),i=e.substring(e.indexOf("<")+1,r),a={};if(e.indexOf(" ")>-1)for(var s=e.substring(e.indexOf(" ")+1,e.indexOf(">")).match(n.mPropRe),o=0;o<s.length;o++){var l=s[o];a[l.split("=")[0]]=l.split("=")[1].match(/(?<=").*?(?=")/)[0]}n.mHandler&&(/(?<=").*?(?=")/.test(t)&&(t=t.match(/(?<=").*?(?=")/)[0]),n.mHandler.startELement(i,a,t,n))}function h(e,t){t.mHandler&&t.mHandler.endElement(t)}console.log("total parse time:"+(c-t))}},{key:"getHtmlDom",value:function(){return this.mMap.get(1)}}]),e}(),RvComponent=function(){function e(t){_classCallCheck(this,e);var n=t.dom,r=t.props,i=t.name,a=t.data,s=t.run,o=t.watch;this.dom=n,this.rdom=this.rdom,this.props=r,this.name=i,this.data=a,this.componentRun=s,this.rvDomUtil=new RVDomUtil(a),this.observeMap=new Map,this.watchObj=o,this.applyTruthFulData()}return _createClass(e,[{key:"applyTruthFulData",value:function(){console.log("before dom:"+JSON.stringify(this.rdom)),this.rdom=this.rvDomUtil.applyTruthfulData(this.dom),console.log("after dom:"+JSON.stringify(this.rdom))}},{key:"run",value:function(){this.componentRun.call(this)}},{key:"getName",value:function(){return this.name}},{key:"apply",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=Object.keys(this.props)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;e[s]&&(this.props[s]=e[s])}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}},{key:"getDom",value:function(){return this.rdom}},{key:"getProp",value:function(){return this.props}}]),e}(),RVDomUtil=function(){function e(t){_classCallCheck(this,e),this.data=t}return _createClass(e,[{key:"getVirtualElement",value:function(e){var t=this,n=[];for(var r in e.children){var i=e.children[r];if(i instanceof Array)i.forEach(function(e){var r=t.getVirtualElement(e);n.push(r)});else if(i instanceof Object){var a=this.getVirtualElement(i);n.push(a)}else n.push(i)}return h(e.tag,e.props,n)}},{key:"applyTruthfulData",value:function(e){var t=this;if("for"in e.props){var n=[],r=void 0;if(!Util.isForIn(e.props.for))throw new Error("the for directive use error");"childDomDatakey"in e?(n=e.data,r=e.childDomDatakey):"domDataKey"in e?(e.props.for.split(" _in_ ")[1]===e.domDataKey&&(n=e.data),r=e.props.for.split(" _in_ ")[0]):(n=data[e.props.for.split(" _in_ ")[1]],r=e.props.for.split(" _in_ ")[0]);var i=[];return n.forEach(function(n){var a=t.vdom2rdom(e,n,r,n);i.push(a)}),i}var a=void 0,s=void 0;return"data"in e?(a=e.data,s=e.childDomDatakey):(a=this.data,s=void 0),this.vdom2rdom(e,a,s,a)}},{key:"vdom2rdom",value:function(e,t,n,r){var i={};i.tag=e.tag,i.children=[],i.props={};var a=Object.keys(e.props);for(var s in a){var o=a[s];if("style"===o){var l=e.props[o];if(l.indexOf(",")>-1){var u=l.split(",");i.props[o]=this.handleArrayStyle(t,u,n)}else i.props[o]=this.handleSingleStyle(t,l,n)}else Util.isPlaceHolder(e.props[o])?Util.isDotOperatorExpression(Util.getPlaceHolderValue(e.props[o]))?i.props[o]=t[Util.getPlaceHolderValue(e.props[o]).split(".")[1]]:i.props[o]=r[Util.getPlaceHolderValue(e.props[o])]:Util.isOperatorExpression(e.props[o])?i.props[o]=Util.getOperatorExpression(e.props[o],t,n):i.props[o]=e.props[o]}for(var c in e.children)Util.isString(e.children[c])?Util.isPlaceHolder(e.children[c])?-1==Util.getPlaceHolderValue(e.children[c]).indexOf(n)?i.children[c]=r[Util.getPlaceHolderValue(e.children[c])]:i.children[c]=t[Util.getPlaceHolderValue(e.children[c]).split(".")[1]]:i.children[c]=e.children[c]:(e.children[c]instanceof Object&&("childDomData"in e.props?(e.children[c].childDomDatakey=e.props.childDomData,e.children[c].data=t):"domData"in e.props&&(e.children[c].domDataKey=e.props.domData,e.children[c].data=t[c]),e.children[c].data=t),i.children[c]=this.applyTruthfulData(e.children[c]));return i}},{key:"handleSingleStyle",value:function(e,t,n){var r="";if(n)if(Util.isPlaceHolder(t))if(-1!=Util.getPlaceHolderValue(t).indexOf(n)){r=e[Util.getPlaceHolderValue(t).split(".")[1]]}else{var i=t.split(":")[0],a=t.split(":")[1];r=i+":"+(a=e[Util.getPlaceHolderValue(a)])}else r=t;else{var s=t.split(":")[0],o=t.split(":")[1];r=Util.isPlaceHolder(o)?s+":"+(o=e[Util.getPlaceHolderValue(o)]):t}return r}},{key:"handleArrayStyle",value:function(e,t,n){var r="",i=!0,a=!1,s=void 0;try{for(var o,l=t[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var u=o.value;r+=this.handleSingleStyle(e,u,n)+";"}}catch(e){a=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw s}}return r}}]),e}(),RV=function(){function e(t){_classCallCheck(this,e);var n=t.el,r=t.data,i=t.template;this.el=n,this.data=r,this.template=i,this.observeMap=new Map,this.parse=new YhmParse,this.rvDomUtil=new RVDomUtil(this.data)}return _createClass(e,[{key:"use",value:function(e){this.parse.useCustomComponent(e)}},{key:"run",value:function(){var e=this,t=Util.isString(this.el)?document.querySelector(this.el):this.el,n=this._getDomTree(),r=this;this.parse.componetMap.forEach(function(e){observe(e.data,e.observeMap,function(){n=r._getDomTree(),r._updatedom(n)}),Object.keys(e.watchObj).forEach(function(t){e.observeMap.hasKey(t)&&e.observeMap.get(t).add(function(){e.watchObj[t](),e.applyTruthFulData()})}),e.run()}),this.ve=this.rvDomUtil.getVirtualElement(this.rvDomUtil.applyTruthfulData(n)),this.w=this.ve.render(),t.appendChild(this.w),observe(this.data,this.observeMap,function(){e._updatedom(n)}),this._updatedom(n)}},{key:"_getDomTree",value:function(){try{this.parse.parseHtmlTemplate(this.template.trim())}catch(e){console.error("rv parse e:"+e)}return this.parse.getHtmlDom()}},{key:"_updatedom",value:function(e){var t=this.rvDomUtil.getVirtualElement(this.rvDomUtil.applyTruthfulData(e));window.nve=t,window.ve=this.ve,patch(this.w,diff(this.ve,t)),this.ve=t}},{key:"watch",value:function(e,t){this.observeMap.hasKey(e)&&this.observeMap.get(e).add(t)}}],[{key:"component",value:function(e){var t=e.name,n=e.template,r=e.props,i=e.data,a=new YhmParse;a.parseHtmlTemplate(n.trim());var s=a.getHtmlDom();return new RvComponent({dom:s,props:r,name:t,data:i,run:e.run,watch:e.watch})}}]),e}();exports.default=RV}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3J2LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiTk9ERV9SRVBMQUNFIiwiQ0hJTERfUkVfT1JERVIiLCJOT0RFX1BST1BTIiwiTk9ERV9DT05URU5UIiwiRWxlbWVudCIsInRhZyIsInByb3BzIiwiY2hpbGRyZW4iLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwidGFnTmFtZSIsInVuZGVmaW5lZCIsIkVycm9yIiwiY291bnQiLCJmb3JFYWNoIiwiY2hpbGQiLCJlbCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInByb3BOYW1lIiwiVXRpbCIsInNldEF0dHIiLCJjaGlsZEVsIiwicmVuZGVyIiwiY3JlYXRlVGV4dE5vZGUiLCJhcHBlbmRDaGlsZCIsIkRpZmYiLCJvbGRUcmVlIiwibmV3VHJlZSIsImluZGV4IiwicGF0Y2hlcyIsImRmc1dhbGsiLCJvbGROb2RlIiwibmV3Tm9kZSIsImN1cnJlbnRQYXRjaCIsImlzU3RyaW5nIiwicHVzaCIsInR5cGUiLCJjb250ZW50IiwicHJvcHNQYXRjaGVzIiwiZGlmZlByb3BzIiwiaXNJZ25vcmVDaGlsZHJlbiIsImRpZmZDaGlsZHJlbiIsIm5vZGUiLCJsZW5ndGgiLCJvbGRQcm9wcyIsIm5ld1Byb3BzIiwiaXNTYW1lIiwib2xkQ2hpbGRyZW4iLCJuZXdDaGlsZHJlbiIsIl90aGlzIiwiZGlmZnMiLCJEaWZmTGlzdCIsImdldFJlc3VsdCIsIm1vdmVzIiwicmVvcmRlclBhdGNoIiwibGVmdE5vZGUiLCJjdXJyZW50Tm9kZUluZGV4IiwibmV3Q2hpbGQiLCJQYXRjaCIsIndhbGtlciIsImN1cnJlbnRQYXRjaGVzIiwibGVuIiwiY2hpbGROb2RlcyIsImFwcGx5UGF0Y2hlcyIsImN1cnJlbnRQYXRjaGUiLCJfdGhpczIiLCJwYXJlbnROb2RlIiwicmVwbGFjZUNoaWxkIiwicmVvcmRlckNoaWxkcmVuIiwic2V0UHJvcHMiLCJ0ZXh0Q29udGVudCIsIm5vZGVWYWx1ZSIsInN0YXRpY05vZGVMaXN0IiwidG9BcnJheSIsIm5vZGVNYXBzIiwic25vZGUiLCJub2RlVHlwZSIsImdldEF0dHJpYnV0ZSIsIm1vdmUiLCJyZW1vdmVDaGlsZCIsInNwbGljZSIsImluc2VydE5vZGUiLCJpdGVtIiwiY2xvbmVOb2RlIiwiaW5zZXJ0QmVmb3JlIiwicmVtb3ZlQXR0cmlidXRlIiwic29tZSIsImxpc3QiLCJhcnJheSIsImRpcmVjdGlvbiIsInRlc3QiLCJzdHlsZSIsImNzc1RleHQiLCJ0b0xvd2VyQ2FzZSIsInNldEF0dHJpYnV0ZSIsInNsaWNlIiwiZGF0YSIsImRhdGFLZXkiLCJleHByZXNzaW9uIiwiaW5kZXhPZiIsInN0YXJ0SW5kZXgiLCJlbmRJbmRleCIsInBsYWNlSG9sZGVyIiwicmVhbFZhbHVlIiwiZ2V0UGxhY2VIb2xkZXJWYWx1ZSIsInNwbGl0IiwicGxhY2VIb2xkZXJWYWx1ZSIsImlzTnVtYmVyIiwicmVwbGFjZSIsImV2YWwiLCJvbGRMaXN0IiwibmV3TGlzdCIsIm9sZExpc3RLZXlJbmRleCIsIm1ha2VLZXlJbmRleCIsImtleUluZGV4IiwibmV3TGlzdEtleUluZGV4IiwibW92ZU9wZXJhdG9yIiwiY2hpbGRMaXN0Iiwib2xkSXRlbSIsIm9JdGVtS2V5IiwiZ2V0S2V5IiwidGVtcExpc3QiLCJyZW1vdmUiLCJyZW1vdmVDb3B5VGVtcExpc3QiLCJuSXRlbSIsIm5JdGVtS2V5IiwiY0l0ZW0iLCJjSXRlbUtleSIsImluc2VydCIsImsiLCJvYnNlcnZlIiwib2JqIiwib2JzZXJ2ZU1hcCIsImNhbGxiYWNrIiwia2V5cyIsImludGVybmFsVmFsdWUiLCJvYnNlcnZhYmxlIiwiT2JzZXJ2YWJsZSIsInB1dCIsImFkZCIsInNldCIsIm5ld1ZhbCIsImNoYW5nZWQiLCJpbnZva2UiLCJ1cGRhdGVGdW5jdGlvbnMiLCJTZXQiLCJvYnNlcnZhYmxlVXBkYXRlIiwiZnVuIiwiY2xvbmUiLCJnZXRUeXBlIiwidG9TdHJpbmciLCJyZXN1bHQiLCJvQ2xhc3MiLCJjb3B5IiwiYXJndW1lbnRzIiwiY2FsbGVlIiwiaCIsImRpZmYiLCJwYXRjaCIsIk1hcCIsIm1hcCIsIl90aGlzMyIsIm1hcEtleSIsIllobVBhcnNlIiwiY29tcG9uZXRNYXAiLCJtSW5kZXgiLCJtTWFwIiwibVByb3BSZSIsIm1IYW5kbGVyIiwic3RhcnRFTGVtZW50IiwicHJvcCIsInRoYXQiLCJoYXNLZXkiLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldFByb3AiLCJnZXREb20iLCJhcHBseSIsImlzQ2xvc2UiLCJ0cmltIiwiZW5kRWxlbWVudCIsInJ2Q29tcG9uZW50IiwiZ2V0TmFtZSIsImh0bWwiLCJzdGFydFRpbWUiLCJEYXRlIiwic3RhcnRUYWdPcGVuIiwic3RhcnRUYWdDbG9zZSIsImVuZFRhZ09wZW4iLCJlbmRUYWdDbG9zZSIsInN0YXJ0Q29tbWVudE9wZW4iLCJlbmRDb21tZW50Q2xvc2UiLCJzdWJzdHJpbmciLCJfcGFyc2VFbmRUYWciLCJfcGFyc2VTdGFydFRhZyIsImVuZFRpbWUiLCJzdGFydFRhZ0VuZEluZGV4IiwicHJvcHNSZXN1bHQiLCJtYXRjaCIsInByIiwiUnZDb21wb25lbnQiLCJjb21wb25lbnRQYXJhbSIsImRvbSIsInJ1biIsIndhdGNoIiwicmRvbSIsImNvbXBvbmVudFJ1biIsInJ2RG9tVXRpbCIsIlJWRG9tVXRpbCIsIndhdGNoT2JqIiwiYXBwbHlUcnV0aEZ1bERhdGEiLCJhcHBseVRydXRoZnVsRGF0YSIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24iLCJfZGlkSXRlcmF0b3JFcnJvciIsIl9pdGVyYXRvckVycm9yIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwiZXJyIiwicmV0dXJuIiwiX3RoaXM0IiwiY2MiLCJBcnJheSIsInYiLCJnZXRWaXJ0dWFsRWxlbWVudCIsIl90aGlzNSIsImRhdGFBcnJheSIsImRhdGFTaW5nbGUiLCJpc0ZvckluIiwiY2hpbGREb21EYXRha2V5IiwiZG9tRGF0YUtleSIsIm9ianMiLCJ2ZG9tMnJkb20iLCJ0ZGF0YSIsInN0eWxlcyIsImhhbmRsZUFycmF5U3R5bGUiLCJoYW5kbGVTaW5nbGVTdHlsZSIsImlzUGxhY2VIb2xkZXIiLCJpc0RvdE9wZXJhdG9yRXhwcmVzc2lvbiIsImlzT3BlcmF0b3JFeHByZXNzaW9uIiwiZ2V0T3BlcmF0b3JFeHByZXNzaW9uIiwiY2hpbGREb21EYXRhIiwiZG9tRGF0YSIsIm5ld1N0eWxlIiwic3R5bGVLZXkiLCJzdHlsZVZhbHVlIiwibmV3U3R5bGVBcnJheSIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yIiwiX2RpZEl0ZXJhdG9yRXJyb3IyIiwiX2l0ZXJhdG9yRXJyb3IyIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsIlJWIiwib3B0aW9uIiwidGVtcGxhdGUiLCJwYXJzZSIsInJ2Q29tcG9uZW50T2JqIiwidXNlQ3VzdG9tQ29tcG9uZW50IiwiX3RoaXM2Iiwicm9vdCIsInF1ZXJ5U2VsZWN0b3IiLCJfZ2V0RG9tVHJlZSIsInJ2VGhhdCIsImNvbXBvbmV0IiwiX3VwZGF0ZWRvbSIsIndhdGNoRnVuIiwidmUiLCJ3IiwicGFyc2VIdG1sVGVtcGxhdGUiLCJlIiwiZXJyb3IiLCJnZXRIdG1sRG9tIiwibnZlIiwid2luZG93Il0sIm1h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S0FBSzJQLE1BQU1hLGtCQUFrQnhRLEtBQUswUCxTQUFTN0UsUUFFN0MsTUFBTzRGLEdBQ0xwRyxRQUFRcUcsTUFBUixjQUE0QkQsR0FFaEMsT0FBT3pRLEtBQUsyUCxNQUFNZ0IsZ0RBRVh2RSxHQUNQLElBQUl3RSxFQUFNNVEsS0FBS3lNLFVBQVVtQixrQkFBa0I1TixLQUFLeU0sVUFBVUksa0JBQWtCVCxJQUM1RXlFLE9BQU9ELElBQU1BLEVBQ2JDLE9BQU9QLEdBQUt0USxLQUFLc1EsR0FDakJoSCxNQUFNdEosS0FBS3VRLEVBQUdsSCxLQUFLckosS0FBS3NRLEdBQUlNLElBQzVCNVEsS0FBS3NRLEdBQUtNLGdDQUVSOVIsRUFBSytJLEdBQ0g3SCxLQUFLNEgsV0FBV3dDLE9BQU90TCxJQUN2QmtCLEtBQUs0SCxXQUFXeEosSUFBSVUsR0FBS3FKLElBQUlOLHVDQVFwQjRILEdBQVEsSUFFYjNSLEVBQWdDMlIsRUFBaEMzUixLQUFNNFIsRUFBMEJELEVBQTFCQyxTQUFVN1AsRUFBZ0I0UCxFQUFoQjVQLE1BQU8yRixFQUFTaUssRUFBVGpLLEtBQzNCbUssRUFBUSxJQUFJaEcsU0FDaEJnRyxFQUFNYSxrQkFBa0JkLEVBQVM3RSxRQUVqQyxJQUFJdUIsRUFBTXVELEVBQU1nQixhQUVoQixPQUFPLElBQUl6RSxZQUFZLENBQUVFLElBQUtBLEVBQUt2TSxNQUFPQSxFQUFPL0IsS0FBTUEsRUFBTTBILEtBQU1BLEVBQU02RyxJQUFLb0QsRUFBT3BELElBQUtDLE1BQU9tRCxFQUFPbkQsaUNBS2pHa0QiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiXHJcblxyXG5cclxuY29uc3QgTk9ERV9SRVBMQUNFID0gMCAvL25vZGUgcmVwbGFjZSBcclxuY29uc3QgQ0hJTERfUkVfT1JERVIgPSAxIC8vY2hpbGQgbm9kZSByZSBvcmRlclxyXG5jb25zdCBOT0RFX1BST1BTID0gMiAvL3Byb3AgY2hhbmdlIFxyXG5jb25zdCBOT0RFX0NPTlRFTlQgPSAzIC8vY29udGVudCBjaGFuZ2VcclxuY2xhc3MgRWxlbWVudCB7XHJcbiAgICAvKipcclxuICAgICAqIHZpcnR1YWwgZG9tIG9iamVjdCBjb25zdHJ1Y3RvclxyXG4gICAgICogQHBhcmFtIHsqfSB0YWcgIHRoZSBodG1sIHRhZyBuYW1lXHJcbiAgICAgKiBAcGFyYW0geyp9IHByb3BzICB0aGUgcHJvcCAoa2V577yMc3R5bGUuLilcclxuICAgICAqIEBwYXJhbSB7Kn0gY2hpbGRyZW4gY2hpbGQgZGF0YVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0YWcsIHByb3BzLCBjaGlsZHJlbikge1xyXG4gICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBFbGVtZW50KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEVsZW1lbnQodGFnTmFtZSwgcHJvcHMsIGNoaWxkcmVuKVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRhZyA9IHRhZ1xyXG4gICAgICAgIHRoaXMucHJvcHMgPSBwcm9wcyB8fCB7fVxyXG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbiB8fCBbXVxyXG4gICAgICAgIHRoaXMua2V5ID0gcHJvcHMgPyBwcm9wcy5rZXkgOiB1bmRlZmluZWRcclxuICAgICAgICBpZiAoIXRoaXMua2V5KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHt0YWd9IC4uLiBodG1sIHRhZyB0aGUga2V5IGlzIHVuZGVmaW5lZGApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHtcclxuICAgICAgICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgY291bnQgKz0gY2hpbGQuY291bnRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb3VudCsrXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jb3VudCA9IGNvdW50XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIHRoZSBtZXRob2QgdXNlIHRvIHZpcnR1YWwgZG9tICByZW5kZSB0byByZWFsIGRvbVxyXG4gICAgICovXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMudGFnKVxyXG4gICAgICAgIGNvbnN0IHByb3BzID0gdGhpcy5wcm9wc1xyXG4gICAgICAgIGZvciAoY29uc3QgcHJvcE5hbWUgaW4gcHJvcHMpIHtcclxuICAgICAgICAgICAgVXRpbC5zZXRBdHRyKGVsLCBwcm9wTmFtZSwgcHJvcHNbcHJvcE5hbWVdKVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjaGlsZEVsID0gKGNoaWxkIGluc3RhbmNlb2YgRWxlbWVudCkgPyBjaGlsZC5yZW5kZXIoKSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNoaWxkKVxyXG4gICAgICAgICAgICBlbC5hcHBlbmRDaGlsZChjaGlsZEVsKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmV0dXJuIGVsO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBEaWZmIHtcclxuICAgIC8qKlxyXG4gICAgICogZG9tIHRyZWUgZGlmZiBhbGdvcml0aG0gb2JqZWN0IGNvbnN0cnVjdG9yXHJcbiAgICAgKiBAcGFyYW0geyp9IG9sZFRyZWUgdGhlIGRvbSB0cmVlIGZvciBiZWZvcmUgdXBkYXRlIFxyXG4gICAgICogQHBhcmFtIHsqfSBuZXdUcmVlIHRoZSBkb20gdHJlZSBmb3IgYWZ0ZXIgdXBkYXRlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9sZFRyZWUsIG5ld1RyZWUpIHtcclxuICAgICAgICB0aGlzLmluZGV4ID0gMFxyXG4gICAgICAgIHRoaXMucGF0Y2hlcyA9IHt9XHJcbiAgICAgICAgdGhpcy5kZnNXYWxrKG9sZFRyZWUsIG5ld1RyZWUsIHRoaXMuaW5kZXgpXHJcbiAgICB9XHJcbiAgICBkZnNXYWxrKG9sZE5vZGUsIG5ld05vZGUsIGluZGV4KSB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRQYXRjaCA9IFtdXHJcbiAgICAgICAgaWYgKG5ld05vZGUgPT0gbnVsbCkge1xyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKFV0aWwuaXNTdHJpbmcob2xkTm9kZSkgJiYgVXRpbC5pc1N0cmluZyhuZXdOb2RlKSkge1xyXG4gICAgICAgICAgICBpZiAob2xkTm9kZSAhPSBuZXdOb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0Y2gucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogTk9ERV9DT05URU5ULFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IG5ld05vZGVcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKG9sZE5vZGUudGFnTmFtZSA9PT0gbmV3Tm9kZS50YWdOYW1lICYmIG9sZE5vZGUua2V5ID09IG5ld05vZGUua2V5KSB7XHJcbiAgICAgICAgICAgIGxldCBwcm9wc1BhdGNoZXMgPSB0aGlzLmRpZmZQcm9wcyhvbGROb2RlLCBuZXdOb2RlKVxyXG4gICAgICAgICAgICBpZiAocHJvcHNQYXRjaGVzKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0Y2gucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogTk9ERV9QUk9QUyxcclxuICAgICAgICAgICAgICAgICAgICBwcm9wczogcHJvcHNQYXRjaGVzXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghVXRpbC5pc0lnbm9yZUNoaWxkcmVuKG5ld05vZGUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpZmZDaGlsZHJlbihvbGROb2RlLmNoaWxkcmVuLCBuZXdOb2RlLmNoaWxkcmVuLCBpbmRleCwgY3VycmVudFBhdGNoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY3VycmVudFBhdGNoLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogTk9ERV9SRVBMQUNFLFxyXG4gICAgICAgICAgICAgICAgbm9kZTogbmV3Tm9kZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY3VycmVudFBhdGNoLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhdGNoZXNbaW5kZXhdID0gY3VycmVudFBhdGNoXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZGlmZlByb3BzKG9sZE5vZGUsIG5ld05vZGUpIHtcclxuXHJcbiAgICAgICAgY29uc3Qgb2xkUHJvcHMgPSBvbGROb2RlLnByb3BzXHJcbiAgICAgICAgY29uc3QgbmV3UHJvcHMgPSBuZXdOb2RlLnByb3BzXHJcblxyXG4gICAgICAgIGNvbnN0IHByb3BzUGF0Y2hlcyA9IHt9XHJcbiAgICAgICAgbGV0IGlzU2FtZSA9IHRydWU7XHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIG9sZFByb3BzKSB7XHJcbiAgICAgICAgICAgIGlmIChuZXdQcm9wc1trZXldICE9PSBvbGRQcm9wc1trZXldKSB7XHJcbiAgICAgICAgICAgICAgICBpc1NhbWUgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgcHJvcHNQYXRjaGVzW2tleV0gPSBuZXdQcm9wc1trZXldXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIG5ld1Byb3BzKSB7XHJcbiAgICAgICAgICAgIGlmICghb2xkUHJvcHMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgaXNTYW1lID0gZmFsc2VcclxuICAgICAgICAgICAgICAgIHByb3BzUGF0Y2hlc1trZXldID0gbmV3UHJvcHNba2V5XVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpc1NhbWUgPyBudWxsIDogcHJvcHNQYXRjaGVzXHJcblxyXG4gICAgfVxyXG4gICAgZGlmZkNoaWxkcmVuKG9sZENoaWxkcmVuLCBuZXdDaGlsZHJlbiwgaW5kZXgsIGN1cnJlbnRQYXRjaCkge1xyXG4gICAgICAgIGxldCBkaWZmTGlzdCA9IG5ldyBEaWZmTGlzdChvbGRDaGlsZHJlbiwgbmV3Q2hpbGRyZW4pXHJcbiAgICAgICAgbGV0IGRpZmZzID0gZGlmZkxpc3QuZ2V0UmVzdWx0KClcclxuICAgICAgICBuZXdDaGlsZHJlbiA9IGRpZmZzLmNoaWxkXHJcbiAgICAgICAgaWYgKGRpZmZzLm1vdmVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBsZXQgcmVvcmRlclBhdGNoID0ge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogQ0hJTERfUkVfT1JERVIsXHJcbiAgICAgICAgICAgICAgICBtb3ZlczogZGlmZnMubW92ZXNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJyZW50UGF0Y2gucHVzaChyZW9yZGVyUGF0Y2gpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBsZWZ0Tm9kZSA9IG51bGxcclxuICAgICAgICBsZXQgY3VycmVudE5vZGVJbmRleCA9IGluZGV4XHJcbiAgICAgICAgb2xkQ2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQsIGkpID0+IHtcclxuICAgICAgICAgICAgbGV0IG5ld0NoaWxkID0gbmV3Q2hpbGRyZW5baV1cclxuICAgICAgICAgICAgY3VycmVudE5vZGVJbmRleCA9IChsZWZ0Tm9kZSAmJiBsZWZ0Tm9kZS5jb3VudCkgP1xyXG4gICAgICAgICAgICAgICAgY3VycmVudE5vZGVJbmRleCArIGxlZnROb2RlLmNvdW50ICsgMSA6XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZUluZGV4ICsgMVxyXG4gICAgICAgICAgICB0aGlzLmRmc1dhbGsoY2hpbGQsIG5ld0NoaWxkLCBjdXJyZW50Tm9kZUluZGV4KVxyXG4gICAgICAgICAgICBsZWZ0Tm9kZSA9IGNoaWxkXHJcbiAgICAgICAgfSlcclxuXHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBQYXRjaCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihub2RlLCBwYXRjaGVzKSB7XHJcbiAgICAgICAgbGV0IHdhbGtlciA9IHtcclxuICAgICAgICAgICAgaW5kZXg6IDBcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kZnNXYWxrKG5vZGUsIHdhbGtlciwgcGF0Y2hlcylcclxuICAgIH1cclxuICAgIGRmc1dhbGsobm9kZSwgd2Fsa2VyLCBwYXRjaGVzKSB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRQYXRjaGVzID0gcGF0Y2hlc1t3YWxrZXIuaW5kZXhdXHJcbiAgICAgICAgbGV0IGxlbiA9IG5vZGUuY2hpbGROb2RlcyA/IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGggOiAwXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgY2hpbGQgPSBub2RlLmNoaWxkTm9kZXNbaV1cclxuICAgICAgICAgICAgd2Fsa2VyLmluZGV4KytcclxuICAgICAgICAgICAgdGhpcy5kZnNXYWxrKGNoaWxkLCB3YWxrZXIsIHBhdGNoZXMpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjdXJyZW50UGF0Y2hlcykge1xyXG4gICAgICAgICAgICB0aGlzLmFwcGx5UGF0Y2hlcyhub2RlLCBjdXJyZW50UGF0Y2hlcylcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgYXBwbHlQYXRjaGVzKG5vZGUsIGN1cnJlbnRQYXRjaGUpIHtcclxuICAgICAgICBjdXJyZW50UGF0Y2hlLmZvckVhY2goKGN1cnJlbnRQYXRjaCkgPT4ge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGN1cnJlbnRQYXRjaC50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE5PREVfUkVQTEFDRTpcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3Tm9kZSA9IFV0aWwuaXNTdHJpbmcoY3VycmVudFBhdGNoLm5vZGUpID8gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3VycmVudFBhdGNoLm5vZGUpIDogY3VycmVudFBhdGNoLm5vZGUucmVuZGVyKClcclxuICAgICAgICAgICAgICAgICAgICBub2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld05vZGUsIG5vZGUpXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIGNhc2UgQ0hJTERfUkVfT1JERVI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW9yZGVyQ2hpbGRyZW4obm9kZSwgY3VycmVudFBhdGNoLm1vdmVzKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICBjYXNlIE5PREVfUFJPUFM6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wcyhub2RlLCBjdXJyZW50UGF0Y2gucHJvcHMpXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIGNhc2UgTk9ERV9DT05URU5UOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLnRleHRDb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUudGV4dENvbnRlbnQgPSBjdXJyZW50UGF0Y2guY29udGVudFxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUubm9kZVZhbHVlID0gY3VycmVudFBhdGNoLmNvbnRlbnRcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgcmVvcmRlckNoaWxkcmVuKG5vZGUsIG1vdmVzKSB7XHJcbiAgICAgICAgbGV0IHN0YXRpY05vZGVMaXN0ID0gVXRpbC50b0FycmF5KG5vZGUuY2hpbGROb2RlcylcclxuICAgICAgICBsZXQgbm9kZU1hcHMgPSB7fVxyXG4gICAgICAgIHN0YXRpY05vZGVMaXN0LmZvckVhY2goKHNub2RlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChzbm9kZS5ub2RlVHlwZSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGtleSA9IHNub2RlLmdldEF0dHJpYnV0ZSgna2V5JylcclxuICAgICAgICAgICAgICAgIGlmIChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlTWFwc1trZXldID0gc25vZGVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgbW92ZXMuZm9yRWFjaCgobW92ZSkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgaW5kZXggPSBtb3ZlLmluZGV4XHJcbiAgICAgICAgICAgIGlmIChtb3ZlLnR5cGUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChzdGF0aWNOb2RlTGlzdFtpbmRleF0gPT09IG5vZGUuY2hpbGROb2Rlc1tpbmRleF0pIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUNoaWxkKG5vZGUuY2hpbGROb2Rlc1tpbmRleF0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzdGF0aWNOb2RlTGlzdC5zcGxpY2UoaW5kZXgsIDEpXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobW92ZS50eXBlID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5zZXJ0Tm9kZSA9IG5vZGVNYXBzW21vdmUuaXRlbS5rZXldID9cclxuICAgICAgICAgICAgICAgICAgICBub2RlTWFwcyhtb3ZlLml0ZW0ua2V5KS5jbG9uZU5vZGUodHJ1ZSkgOlxyXG4gICAgICAgICAgICAgICAgICAgIFV0aWwuaXNTdHJpbmcobW92ZS5pdGVtKSA/IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG1vdmUuaXRlbSkgOiBtb3ZlLml0ZW0ucmVuZGVyKClcclxuICAgICAgICAgICAgICAgIHN0YXRpY05vZGVMaXN0LnNwbGljZShpbmRleCwgMCwgaW5zZXJ0Tm9kZSlcclxuICAgICAgICAgICAgICAgIG5vZGUuaW5zZXJ0QmVmb3JlKGluc2VydE5vZGUsIG5vZGUuY2hpbGROb2Rlc1tpbmRleF0gfHwgbnVsbClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG4gICAgc2V0UHJvcHMobm9kZSwgcHJvcHMpIHtcclxuICAgICAgICBmb3IgKGxldCBrZXkgaW4gcHJvcHMpIHtcclxuICAgICAgICAgICAgaWYgKHByb3BzW2tleV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoa2V5KVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwcm9wc1trZXldXHJcbiAgICAgICAgICAgICAgICBVdGlsLnNldEF0dHIobm9kZSwga2V5LCB2YWx1ZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbmNsYXNzIFV0aWwge1xyXG4gICAgc3RhdGljIGlzU3RyaW5nKHNvbWUpIHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIHNvbWUgPT09ICdzdHJpbmcnXHJcbiAgICB9XHJcbiAgICBzdGF0aWMgdG9BcnJheShsaXN0KSB7XHJcbiAgICAgICAgaWYgKCFsaXN0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYXJyYXkgPSBbXVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBhcnJheS5wdXNoKGxpc3RbaV0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcnJheVxyXG4gICAgfVxyXG4gICAgc3RhdGljIGlzRm9ySW4oZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIC9eXFx3KiBfaW5fIFxcdyokLy50ZXN0KGRpcmVjdGlvbilcclxuICAgIH1cclxuICAgIHN0YXRpYyBpc0ZvckZvckluKGRpcmVjdGlvbikge1xyXG4gICAgICAgIHJldHVybiAvXlxcdyogX2luKiQvLnRlc3QoZGlyZWN0aW9uKVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBpc0Zvck9yRm9yRm9yKGRpcmVjdGlvbikge1xyXG4gICAgICAgIHJldHVybiAvXlxcdyogX2luXyBcXHd8X2luKiQvLnRlc3QoZGlyZWN0aW9uKVxyXG4gICAgfVxyXG4gICAgc3RhdGljIGlzSWdub3JlQ2hpbGRyZW4obm9kZSkge1xyXG4gICAgICAgIHJldHVybiBub2RlLnByb3BzICYmIG5vZGUucHJvcHMuaGFzT3duUHJvcGVydHkoXCJpZ25vcmVcIilcclxuICAgIH1cclxuICAgIHN0YXRpYyBpc051bWJlcih2YWx1ZSkge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgLy/mraPmlbTmlbBcclxuICAgICAgICAgICAgdmFyIHJlTnVtYmVyID0gL15cXGQrJC9cclxuICAgICAgICAgICAgLy/otJ/mlbTmlbBcclxuICAgICAgICAgICAgdmFyIHJlTmVOdW1iZXIgPSAvXi1cXGQrJC9cclxuICAgICAgICAgICAgLy/mraPlrp7mlbBcclxuICAgICAgICAgICAgdmFyIHJlUmVhbE51bWJlcjEgPSAvXlsxLTldXFxkKlsuXVxcZCskLyAgLy/pnZ7pm7blvIDlpLRcclxuICAgICAgICAgICAgdmFyIHJlUmVhbE51bWJlcjIgPSAvXjBbLl1cXGQrJC8gLy/pm7blvIDlpLRcclxuICAgICAgICAgICAgLy/otJ/lrp7mlbBcclxuICAgICAgICAgICAgdmFyIHJlTmVSZWFsTnVtYmVyMSA9IC9eLVsxLTldXFxkKlsuXVxcZCskLyAgLy/pnZ7pm7blvIDlpLRcclxuICAgICAgICAgICAgdmFyIHJlTmVSZWFsTnVtYmVyMiA9IC9eLTBbLl1cXGQrJC8gLy/pm7blvIDlpLRcclxuXHJcbiAgICAgICAgICAgIGlmIChyZU51bWJlci50ZXN0KHZhbHVlKSB8fCByZU5lTnVtYmVyLnRlc3QodmFsdWUpXHJcbiAgICAgICAgICAgICAgICB8fCByZVJlYWxOdW1iZXIxLnRlc3QodmFsdWUpIHx8IHJlUmVhbE51bWJlcjIudGVzdCh2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHx8IHJlTmVSZWFsTnVtYmVyMS50ZXN0KHZhbHVlKSB8fCByZU5lUmVhbE51bWJlcjIudGVzdCh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgKHZhbHVlKSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgc3RhdGljIHNldEF0dHIobm9kZSwga2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3N0eWxlJzpcclxuICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUuY3NzVGV4dCA9IHZhbHVlXHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICBjYXNlICd2YWx1ZSc6XHJcbiAgICAgICAgICAgICAgICBsZXQgdGFnTmFtZSA9IG5vZGUudGFnTmFtZSB8fCAnJ1xyXG4gICAgICAgICAgICAgICAgdGFnTmFtZSA9IHRhZ05hbWUudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICAgICAgaWYgKHRhZ05hbWUgPT09ICdpbnB1dCcgfHwgdGFnTmFtZSA9PT0gJ3RleHRhcmVhJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUudmFsdWUgPSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpXHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICBzdGF0aWMgaXNQbGFjZUhvbGRlcihjb250ZW50KSB7XHJcbiAgICAgICAgaWYgKGNvbnRlbnQpIHtcclxuICAgICAgICAgICAgaWYgKC9eJSNcXHcqLlxcdyojJSQvLnRlc3QoY29udGVudCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXRpYyBpc0RvdE9wZXJhdG9yRXhwcmVzc2lvbihjb250ZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIC9eXFx3KlxcLlxcdyokLy50ZXN0KGNvbnRlbnQpXHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZ2V0UGxhY2VIb2xkZXJWYWx1ZShjb250ZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQuc2xpY2UoMiwgLTIpXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOaYr+WQpuS4uuihqOi+vuW8j1xyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnQgXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBpc09wZXJhdG9yRXhwcmVzc2lvbihjb250ZW50KSB7XHJcblxyXG4gICAgICAgIGlmIChVdGlsLmlzU3RyaW5nKGNvbnRlbnQpKSB7XHJcbiAgICAgICAgICAgIGlmICgvXlxce1xcdyp8XFx8XFwlK1xcfSQvLnRlc3QoY29udGVudCkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gICAgc3RhdGljIGdldE9wZXJhdG9yRXhwcmVzc2lvbihjb250ZW50LCBkYXRhLCBkYXRhS2V5KSB7XHJcbiAgICAgICAgaWYgKFV0aWwuaXNTdHJpbmcoY29udGVudCkpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBleHByZXNzaW9uID0gY29udGVudC5zbGljZShjb250ZW50LmluZGV4T2YoXCJ7XCIpICsgMSwgY29udGVudC5pbmRleE9mKFwifVwiKSlcclxuICAgICAgICAgICAgbGV0IHN0YXJ0SW5kZXggPSBleHByZXNzaW9uLmluZGV4T2YoXCIlI1wiKVxyXG4gICAgICAgICAgICBsZXQgZW5kSW5kZXggPSBleHByZXNzaW9uLmluZGV4T2YoXCIjJVwiKSArIDJcclxuICAgICAgICAgICAgaWYgKHN0YXJ0SW5kZXggIT0gLTEgJiYgZW5kSW5kZXggIT0gLTEgJiYgc3RhcnRJbmRleCA8IGVuZEluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGxhY2VIb2xkZXIgPSBleHByZXNzaW9uLnNsaWNlKHN0YXJ0SW5kZXgsIGVuZEluZGV4KVxyXG4gICAgICAgICAgICAgICAgbGV0IHJlYWxWYWx1ZVxyXG4gICAgICAgICAgICAgICAgaWYgKHBsYWNlSG9sZGVyLmluZGV4T2YoXCIuXCIpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChVdGlsLmdldFBsYWNlSG9sZGVyVmFsdWUocGxhY2VIb2xkZXIpLnNwbGl0KFwiLlwiKVswXSA9PT0gZGF0YUtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGxhY2VIb2xkZXJWYWx1ZSA9IGRhdGFbVXRpbC5nZXRQbGFjZUhvbGRlclZhbHVlKHBsYWNlSG9sZGVyKS5zcGxpdChcIi5cIilbMV1dXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWxWYWx1ZSA9IFV0aWwuaXNOdW1iZXIocGxhY2VIb2xkZXJWYWx1ZSkgPyBwbGFjZUhvbGRlclZhbHVlIDogYFwiJHtwbGFjZUhvbGRlclZhbHVlfVwiYC8v6YCa6L+HcGxhY2VIb2xkZXLlj5bnnJ/lrp7nmoTlgLxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlYWxWYWx1ZSA9IGRhdGFbVXRpbC5nZXRQbGFjZUhvbGRlclZhbHVlKHBsYWNlSG9sZGVyKV0vL+mAmui/h3BsYWNlSG9sZGVy5Y+W55yf5a6e55qE5YC8XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZXhwcmVzc2lvbiA9IGV4cHJlc3Npb24ucmVwbGFjZShwbGFjZUhvbGRlciwgcmVhbFZhbHVlKVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZXZhbChleHByZXNzaW9uKVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuY2xhc3MgRGlmZkxpc3Qge1xyXG4gICAgLyoqXHJcbiAgICAgKiBkaWZmIGxpc3QgXHJcbiAgICAgKiBAcGFyYW0geyp9IG9sZExpc3QgXHJcbiAgICAgKiBAcGFyYW0geyp9IG5ld0xpc3QgXHJcbiAgICAgKiBAcGFyYW0geyp9IGtleSBcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob2xkTGlzdCwgbmV3TGlzdCkge1xyXG4gICAgICAgIGxldCBvbGRMaXN0S2V5SW5kZXggPSB0aGlzLm1ha2VLZXlJbmRleChvbGRMaXN0KS5rZXlJbmRleFxyXG4gICAgICAgIGxldCBuZXdMaXN0S2V5SW5kZXggPSB0aGlzLm1ha2VLZXlJbmRleChuZXdMaXN0KS5rZXlJbmRleFxyXG4gICAgICAgIHRoaXMubW92ZU9wZXJhdG9yID0gW11cclxuICAgICAgICB0aGlzLmNoaWxkTGlzdCA9IFtdXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvbGRMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBvbGRJdGVtID0gb2xkTGlzdFtpXVxyXG4gICAgICAgICAgICBsZXQgb0l0ZW1LZXkgPSB0aGlzLmdldEtleShvbGRJdGVtKVxyXG4gICAgICAgICAgICBpZiAoIW5ld0xpc3RLZXlJbmRleC5oYXNPd25Qcm9wZXJ0eShvSXRlbUtleSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRMaXN0LnB1c2gobnVsbClcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRMaXN0LnB1c2gobmV3TGlzdFtuZXdMaXN0S2V5SW5kZXhbb0l0ZW1LZXldXSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRlbXBMaXN0ID0gdGhpcy5jaGlsZExpc3Quc2xpY2UoMClcclxuICAgICAgICBsZXQgaSA9IDA7XHJcbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLnRlbXBMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50ZW1wTGlzdFtpXSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoaSlcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ29weVRlbXBMaXN0KGkpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpKytcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgaW5kZXggPSAwXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBuSXRlbSA9IG5ld0xpc3RbaV1cclxuICAgICAgICAgICAgbGV0IG5JdGVtS2V5ID0gdGhpcy5nZXRLZXkobkl0ZW0pXHJcbiAgICAgICAgICAgIGxldCBjSXRlbSA9IHRoaXMudGVtcExpc3RbaW5kZXhdXHJcbiAgICAgICAgICAgIGxldCBjSXRlbUtleSA9IHRoaXMuZ2V0S2V5KGNJdGVtKVxyXG4gICAgICAgICAgICBpZiAoY0l0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChuSXRlbUtleSAhPSBjSXRlbUtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbGRMaXN0S2V5SW5kZXguaGFzT3duUHJvcGVydHkobkl0ZW1LZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjTmV4dEl0ZW1LZXkgPSBnZXRLZXkodGhpcy50ZW1wTGlzdFtpbmRleCArIDFdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobkl0ZW1LZXkgPT09IGNOZXh0SXRlbUtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoaSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ29weVRlbXBMaXN0KGluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgrK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnNlcnQoaSwgbkl0ZW0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluc2VydChpLCBuSXRlbSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4KytcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5zZXJ0KGksIG5JdGVtKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBrID0gdGhpcy50ZW1wTGlzdC5sZW5ndGggLSBpbmRleFxyXG4gICAgICAgIHdoaWxlIChpbmRleCsrIDwgdGhpcy50ZW1wTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgay0tXHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKGsgKyBuZXdMaXN0Lmxlbmd0aClcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH1cclxuICAgIG1ha2VLZXlJbmRleChsaXN0KSB7XHJcbiAgICAgICAgbGV0IGtleUluZGV4ID0ge31cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGl0ZW0gPSBsaXN0W2ldXHJcbiAgICAgICAgICAgIGxldCBpdGVtS2V5ID0gdGhpcy5nZXRLZXkoaXRlbSlcclxuICAgICAgICAgICAga2V5SW5kZXhbaXRlbUtleV0gPSBpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGtleUluZGV4OiBrZXlJbmRleFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRLZXkoaXRlbSkge1xyXG4gICAgICAgIGlmICghaXRlbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpdGVtW1wia2V5XCJdXHJcbiAgICB9XHJcbiAgICByZW1vdmVDb3B5VGVtcExpc3QoaW5kZXgpIHtcclxuICAgICAgICB0aGlzLnRlbXBMaXN0LnNwbGljZShpbmRleCwgMSlcclxuICAgIH1cclxuICAgIHJlbW92ZShpbmRleCkge1xyXG4gICAgICAgIHRoaXMubW92ZU9wZXJhdG9yLnB1c2goe1xyXG4gICAgICAgICAgICBpbmRleDogaW5kZXgsXHJcbiAgICAgICAgICAgIHR5cGU6IDBcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGluc2VydChpbmRleCwgaXRlbSkge1xyXG4gICAgICAgIHRoaXMubW92ZU9wZXJhdG9yLnB1c2goe1xyXG4gICAgICAgICAgICBpbmRleDogaW5kZXgsXHJcbiAgICAgICAgICAgIGl0ZW06IGl0ZW0sXHJcbiAgICAgICAgICAgIHR5cGU6IDFcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGdldFJlc3VsdCgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtb3ZlczogdGhpcy5tb3ZlT3BlcmF0b3IsXHJcbiAgICAgICAgICAgIGNoaWxkOiB0aGlzLmNoaWxkTGlzdFxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBvYnNlcnZlKG9iaiwgb2JzZXJ2ZU1hcCwgY2FsbGJhY2spIHtcclxuXHJcbiAgICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICBsZXQgaW50ZXJuYWxWYWx1ZSA9IG9ialtrZXldXHJcbiAgICAgICAgbGV0IG9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZSgpXHJcbiAgICAgICAgaWYgKGludGVybmFsVmFsdWUgaW5zdGFuY2VvZiBPYmplY3QpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZShpbnRlcm5hbFZhbHVlLCBvYnNlcnZlTWFwLCBjYWxsYmFjaylcclxuICAgICAgICB9XHJcbiAgICAgICAgb2JzZXJ2ZU1hcC5wdXQoa2V5LCBvYnNlcnZhYmxlKVxyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xyXG4gICAgICAgICAgICBnZXQoKSB7XHJcbiAgICAgICAgICAgICAgICBvYnNlcnZhYmxlLmFkZChjYWxsYmFjaylcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbnRlcm5hbFZhbHVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldChuZXdWYWwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNoYW5nZWQgPSBpbnRlcm5hbFZhbHVlICE9PSBuZXdWYWxcclxuICAgICAgICAgICAgICAgIGludGVybmFsVmFsdWUgPSBuZXdWYWxcclxuICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2YWJsZS5pbnZva2UoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbiAgICByZXR1cm4gb2JqXHJcbn1cclxuXHJcblxyXG5jbGFzcyBPYnNlcnZhYmxlIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMudXBkYXRlRnVuY3Rpb25zID0gbmV3IFNldCgpXHJcbiAgICB9XHJcbiAgICBhZGQob2JzZXJ2YWJsZVVwZGF0ZSkge1xyXG4gICAgICAgIHRoaXMudXBkYXRlRnVuY3Rpb25zLmFkZChvYnNlcnZhYmxlVXBkYXRlKVxyXG4gICAgfVxyXG4gICAgaW52b2tlKCkge1xyXG4gICAgICAgIHRoaXMudXBkYXRlRnVuY3Rpb25zLmZvckVhY2goZnVuID0+IGZ1bigpKVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiB0aGUgbWV0aG9kIHVzZSB0byBkZWVwIGNsb25lIG9ialxyXG4gKiBAcGFyYW0geyp9IG9iaiBcclxuICovXHJcbmZ1bmN0aW9uIGNsb25lKG9iaikge1xyXG4gICAgbGV0IGdldFR5cGUgPSAobykgPT4ge1xyXG4gICAgICAgIGlmIChvID09PSBudWxsKSByZXR1cm4gXCJudWxsXCI7XHJcbiAgICAgICAgaWYgKG8gPT09IHVuZGVmaW5lZCkgcmV0dXJuIFwidW5kZWZpbmVkXCI7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7XHJcbiAgICB9XHJcbiAgICBsZXQgcmVzdWx0LCBvQ2xhc3MgPSBnZXRUeXBlKG9iaik7XHJcbiAgICBpZiAob0NsYXNzID09PSBcIk9iamVjdFwiKSB7XHJcbiAgICAgICAgcmVzdWx0ID0ge307XHJcbiAgICB9IGVsc2UgaWYgKG9DbGFzcyA9PT0gXCJBcnJheVwiKSB7XHJcbiAgICAgICAgcmVzdWx0ID0gW107XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgICBmb3IgKGtleSBpbiBvYmopIHtcclxuICAgICAgICBsZXQgY29weSA9IG9ialtrZXldO1xyXG4gICAgICAgIGlmIChnZXRUeXBlKGNvcHkpID09IFwiT2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBhcmd1bWVudHMuY2FsbGVlKGNvcHkpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZ2V0VHlwZShjb3B5KSA9PSBcIkFycmF5XCIpIHtcclxuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBhcmd1bWVudHMuY2FsbGVlKGNvcHkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gb2JqW2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGgodGFnTmFtZSwgcHJvcHMsIGNoaWxkcmVuKSB7XHJcbiAgICByZXR1cm4gbmV3IEVsZW1lbnQodGFnTmFtZSwgcHJvcHMsIGNoaWxkcmVuKVxyXG59XHJcblxyXG5mdW5jdGlvbiBkaWZmKG9sZFRyZWUsIG5ld1RyZWUpIHtcclxuICAgIGxldCBkID0gbmV3IERpZmYob2xkVHJlZSwgbmV3VHJlZSlcclxuICAgIHJldHVybiBkLnBhdGNoZXNcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHBhdGNoKG5vZGUsIHBhdGNoZXMpIHtcclxuICAgIHJldHVybiBuZXcgUGF0Y2gobm9kZSwgcGF0Y2hlcylcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8qKlxyXG4gICAgICogdGhlIG1hcCBvYmplY3QgdXNlIHRvIHNhdmUgbGlraWx5IChrZXksdmFsdWUpIGRhdGFcclxuICAgICAqL1xyXG5jbGFzcyBNYXAge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5sZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMubWFwID0gbmV3IE9iamVjdCgpO1xyXG4gICAgfVxyXG4gICAgcHV0KGtleSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAoIShrZXkgaW4gdGhpcy5tYXApKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGVuZ3RoKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubWFwW2tleV0gPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIGdldChrZXkpIHtcclxuICAgICAgICByZXR1cm4gKGtleSBpbiB0aGlzLm1hcCkgPyB0aGlzLm1hcFtrZXldIDogbnVsbDtcclxuICAgIH1cclxuICAgIHJlbW92ZShrZXkpIHtcclxuICAgICAgICBpZiAoKGtleSBpbiB0aGlzLm1hcCkpIHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMubWFwW2tleV1cclxuICAgICAgICAgICAgdGhpcy5sZW5ndGgtLTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBoYXNLZXkoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIChrZXkgaW4gdGhpcy5tYXApXHJcbiAgICB9XHJcbiAgICBmb3JFYWNoKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5tYXApLmZvckVhY2gobWFwS2V5ID0+IHtcclxuICAgICAgICAgICAgY2FsbGJhY2sodGhpcy5tYXBbbWFwS2V5XSlcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgc2l6ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sZW5ndGg7XHJcbiAgICB9XHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICBsZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMubWFwID0gbmV3IE9iamVjdCgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiB0aGlzIGNsYXNzIGlzIHBhcnNlIGh0bWwgdGVtcGxhdGUgdG8gdmlydHVhbCBkb20gdHJlZVxyXG4gKiBAYXV0aG9yIHlob25nbVxyXG4gKi9cclxuY2xhc3MgWWhtUGFyc2Uge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5jb21wb25ldE1hcCA9IG5ldyBNYXAoKVxyXG4gICAgICAgIHRoaXMubUluZGV4ID0gMFxyXG4gICAgICAgIHRoaXMubU1hcCA9IG5ldyBNYXAoKVxyXG4gICAgICAgIHRoaXMubVByb3BSZSA9IC8oW149XFxzXSspKFxccyo9XFxzKigoXFxcIihbXlwiXSopXFxcIil8KFxcJyhbXiddKilcXCcpfFtePlxcc10rKSk/L2dtXHJcbiAgICAgICAgdGhpcy5tSGFuZGxlciA9IHtcclxuICAgICAgICAgICAgc3RhcnRFTGVtZW50OiBmdW5jdGlvbiAodGFnTmFtZSwgcHJvcCwgY29udGVudCwgdGhhdCkge1xyXG4gICAgICAgICAgICAgICAgdGhhdC5tSW5kZXggKz0gMVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoYXQuY29tcG9uZXRNYXAuaGFzS2V5KHRhZ05hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/lt7Lnu4/mnInlvZPliY3nu4Tku7bnmoTorrDlvZXvvIzlsIblvZPliY3nu4Tku7bmj5LlhaVkb23kuK1cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImNvbixwcm9wOlwiICsgSlNPTi5zdHJpbmdpZnkodGhhdC5jb21wb25ldE1hcC5nZXQodGFnTmFtZSkuZ2V0UHJvcCgpKSlcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImNvbixkb206XCIgKyBKU09OLnN0cmluZ2lmeSh0aGF0LmNvbXBvbmV0TWFwLmdldCh0YWdOYW1lKS5nZXREb20oKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYHRhZ05hbWU6JHt0YWdOYW1lfSAscHJvcDoke0pTT04uc3RyaW5naWZ5KHByb3ApfWApXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuY29tcG9uZXRNYXAuZ2V0KHRhZ05hbWUpLmFwcGx5KHByb3ApXHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5tTWFwLnB1dCh0aGF0Lm1JbmRleCwgdGhhdC5jb21wb25ldE1hcC5nZXQodGFnTmFtZSkuZ2V0RG9tKCkpXHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0geyB0YWc6IHRhZ05hbWUsIHByb3BzOiBwcm9wLCBjaGlsZHJlbjogW10sIGluZGV4OiB0aGF0Lm1JbmRleCwgY29udGVudDogY29udGVudCwgaXNDbG9zZTogZmFsc2UgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5sZW5ndGggPiAwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmouY2hpbGRyZW4ucHVzaChjb250ZW50LnRyaW0oKSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5tTWFwLnB1dCh0aGF0Lm1JbmRleCwgb2JqKVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW5kRWxlbWVudDogZnVuY3Rpb24gKHRoYXQpIHtcclxuICAgICAgICAgICAgICAgIHRoYXQubU1hcC5nZXQodGhhdC5tSW5kZXgpLmlzQ2xvc2UgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICBpZiAodGhhdC5tTWFwLmhhc0tleSgodGhhdC5tSW5kZXggLSAxKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0Lm1NYXAuZ2V0KHRoYXQubUluZGV4IC0gMSkuY2hpbGRyZW4ucHVzaCh0aGF0Lm1NYXAuZ2V0KHRoYXQubUluZGV4KSlcclxuICAgICAgICAgICAgICAgICAgICB0aGF0Lm1NYXAucmVtb3ZlKHRoYXQubUluZGV4KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhhdC5tSW5kZXggLT0gMVxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDnlKjkuo7op6PmnpDoh6rlrprkuYnnu4Tku7bvvIzmjInlkI3lrZfntKLlvJXnu4Tku7ZcclxuICAgICAqIEBwYXJhbSB7Kn0gcnZDb21wb25lbnQgXHJcbiAgICAgKi9cclxuICAgIHVzZUN1c3RvbUNvbXBvbmVudChydkNvbXBvbmVudCkge1xyXG5cclxuICAgICAgICB0aGlzLmNvbXBvbmV0TWFwLnB1dChydkNvbXBvbmVudC5nZXROYW1lKCksIHJ2Q29tcG9uZW50KVxyXG4gICAgfVxyXG4gICAgcGFyc2VIdG1sVGVtcGxhdGUoaHRtbCkge1xyXG4gICAgICAgIGxldCBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpIC8gMTAwMFxyXG4gICAgICAgIHZhciBpbmRleCA9IDBcclxuICAgICAgICB3aGlsZSAoaHRtbCkge1xyXG4gICAgICAgICAgICB2YXIgc3RhcnRUYWdPcGVuID0gaHRtbC5pbmRleE9mKCc8JylcclxuICAgICAgICAgICAgdmFyIHN0YXJ0VGFnQ2xvc2UgPSBodG1sLmluZGV4T2YoJz4nKSB8fCBodG1sLmluZGV4T2YoJy8+JylcclxuICAgICAgICAgICAgdmFyIGVuZFRhZ09wZW4gPSBodG1sLmluZGV4T2YoJzwvJylcclxuICAgICAgICAgICAgdmFyIGVuZFRhZ0Nsb3NlID0gaHRtbC5pbmRleE9mKCc+JylcclxuICAgICAgICAgICAgdmFyIHN0YXJ0Q29tbWVudE9wZW4gPSBodG1sLmluZGV4T2YoJzwhLS0nKVxyXG4gICAgICAgICAgICB2YXIgZW5kQ29tbWVudENsb3NlID0gaHRtbC5pbmRleE9mKCctLT4nKVxyXG4gICAgICAgICAgICBpZiAoc3RhcnRDb21tZW50T3BlbiA9PSAwICYmIGVuZENvbW1lbnRDbG9zZSAhPSAtMSAmJiBlbmRDb21tZW50Q2xvc2UgPiBzdGFydENvbW1lbnRPcGVuKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IGVuZENvbW1lbnRDbG9zZSArIDNcclxuICAgICAgICAgICAgICAgIHBhcnNlQ29tbWVudChodG1sLnN1YnN0cmluZyhzdGFydENvbW1lbnRPcGVuICsgNCwgZW5kQ29tbWVudENsb3NlICsgMykpO1xyXG4gICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwuc3Vic3RyaW5nKGluZGV4KVxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlbmRUYWdPcGVuICE9IC0xICYmIGVuZFRhZ0Nsb3NlICE9IC0xICYmIGVuZFRhZ0Nsb3NlID4gZW5kVGFnT3Blbikge1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBlbmRUYWdDbG9zZSArIDFcclxuICAgICAgICAgICAgICAgIF9wYXJzZUVuZFRhZyhodG1sLnN1YnN0cmluZyhlbmRUYWdPcGVuLCBlbmRUYWdDbG9zZSArIDEpLCB0aGlzKVxyXG4gICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwuc3Vic3RyaW5nKGluZGV4KVxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzdGFydFRhZ09wZW4gIT0gLTEgJiYgc3RhcnRUYWdDbG9zZSAhPSAtMSAmJiBzdGFydFRhZ0Nsb3NlID4gc3RhcnRUYWdPcGVuKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IHN0YXJ0VGFnQ2xvc2UgKyAxXHJcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IFwiXCJcclxuICAgICAgICAgICAgICAgIGlmIChodG1sLmluZGV4T2YoJzwnLCBpbmRleCkgPiAtMSAmJiBodG1sLmluZGV4T2YoJzwnLCBpbmRleCkgPiBzdGFydFRhZ0Nsb3NlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGV0IGNvbnRlbnRFbmRJbmRleCA9IGh0bWwuaW5kZXhPZignPC8nLCAoaW5kZXggKyAxKSlcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gaHRtbC5zdWJzdHJpbmcoaW5kZXgsIGh0bWwuaW5kZXhPZignPCcsIGluZGV4KSkudHJpbSgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfcGFyc2VTdGFydFRhZyhodG1sLnN1YnN0cmluZyhzdGFydFRhZ09wZW4sIHN0YXJ0VGFnQ2xvc2UgKyAxKSwgY29udGVudCwgdGhpcylcclxuICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sLnN1YnN0cmluZyhpbmRleClcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGVuZFRpbWUgPSBuZXcgRGF0ZSgpIC8gMTAwMFxyXG4gICAgICAgIGNvbnNvbGUubG9nKGB0b3RhbCBwYXJzZSB0aW1lOiR7ZW5kVGltZSAtIHN0YXJ0VGltZX1gKVxyXG5cclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIF9wYXJzZVN0YXJ0VGFnKGh0bWwsIGNvbnRlbnQsIHRoYXQpIHtcclxuICAgICAgICAgICAgbGV0IHN0YXJ0VGFnRW5kSW5kZXggPSBodG1sLmluZGV4T2YoJyAnKSAhPSAtMSA/IGh0bWwuaW5kZXhPZignICcpIDogaHRtbC5pbmRleE9mKCcvPicpID09IC0xID8gaHRtbC5pbmRleE9mKCc+JykgOiBodG1sLmluZGV4T2YoJy8+JylcclxuICAgICAgICAgICAgdmFyIHRhZ05hbWUgPSBodG1sLnN1YnN0cmluZyhodG1sLmluZGV4T2YoJzwnKSArIDEsIHN0YXJ0VGFnRW5kSW5kZXgpXHJcbiAgICAgICAgICAgIHZhciBwcm9wID0ge31cclxuICAgICAgICAgICAgaWYgKGh0bWwuaW5kZXhPZignICcpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwcm9wcyA9IGh0bWwuc3Vic3RyaW5nKGh0bWwuaW5kZXhPZignICcpICsgMSwgaHRtbC5pbmRleE9mKCc+JykpXHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHByb3BzUmVzdWx0ID0gcHJvcHMubWF0Y2godGhhdC5tUHJvcFJlKVxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9wc1Jlc3VsdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwciA9IHByb3BzUmVzdWx0W2ldXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHByb3BbcHIuc3BsaXQoXCI9XCIpWzBdXSA9IHByLnNwbGl0KFwiPVwiKVsxXS5tYXRjaCgvKD88PVwiKS4qPyg/PVwiKS8pWzBdXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGF0Lm1IYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoLyg/PD1cIikuKj8oPz1cIikvLnRlc3QoY29udGVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5tYXRjaCgvKD88PVwiKS4qPyg/PVwiKS8pWzBdXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGF0Lm1IYW5kbGVyLnN0YXJ0RUxlbWVudCh0YWdOYW1lLCBwcm9wLCBjb250ZW50LCB0aGF0KVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBfcGFyc2VFbmRUYWcoaHRtbCwgdGhhdCkge1xyXG4gICAgICAgICAgICBpZiAodGhhdC5tSGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgdGhhdC5tSGFuZGxlci5lbmRFbGVtZW50KHRoYXQpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gcGFyc2VDb21tZW50KGh0bWwpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYHBhcnNlQ29tbWVudD0ke2h0bWx9YClcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgZ2V0SHRtbERvbSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tTWFwLmdldCgxKVxyXG4gICAgfVxyXG5cclxufVxyXG5jbGFzcyBSdkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb21wb25lbnRQYXJhbSkge1xyXG4gICAgICAgIGxldCB7IGRvbSwgcHJvcHMsIG5hbWUsIGRhdGEsIHJ1biwgd2F0Y2ggfSA9IGNvbXBvbmVudFBhcmFtXHJcbiAgICAgICAgdGhpcy5kb20gPSBkb21cclxuICAgICAgICB0aGlzLnJkb20gPSB0aGlzLnJkb21cclxuICAgICAgICB0aGlzLnByb3BzID0gcHJvcHNcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lXHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YVxyXG4gICAgICAgIHRoaXMuY29tcG9uZW50UnVuID0gcnVuXHJcbiAgICAgICAgdGhpcy5ydkRvbVV0aWwgPSBuZXcgUlZEb21VdGlsKGRhdGEpXHJcbiAgICAgICAgdGhpcy5vYnNlcnZlTWFwID0gbmV3IE1hcCgpXHJcbiAgICAgICAgdGhpcy53YXRjaE9iaiA9IHdhdGNoXHJcbiAgICAgICAgdGhpcy5hcHBseVRydXRoRnVsRGF0YSgpXHJcbiAgICB9XHJcbiAgICBhcHBseVRydXRoRnVsRGF0YSgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgYmVmb3JlIGRvbToke0pTT04uc3RyaW5naWZ5KHRoaXMucmRvbSl9YClcclxuICAgICAgICB0aGlzLnJkb20gPSB0aGlzLnJ2RG9tVXRpbC5hcHBseVRydXRoZnVsRGF0YSh0aGlzLmRvbSlcclxuICAgICAgICBjb25zb2xlLmxvZyhgYWZ0ZXIgZG9tOiR7SlNPTi5zdHJpbmdpZnkodGhpcy5yZG9tKX1gKVxyXG4gICAgfVxyXG4gICAgcnVuKCkge1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50UnVuLmNhbGwodGhpcylcclxuICAgIH1cclxuICAgIGdldE5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZVxyXG4gICAgfVxyXG4gICAgYXBwbHkocHJvcHMpIHtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgcHJvcCBvZiBPYmplY3Qua2V5cyh0aGlzLnByb3BzKSkge1xyXG5cclxuICAgICAgICAgICAgaWYgKHByb3BzW3Byb3BdKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzW3Byb3BdID0gcHJvcHNbcHJvcF1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldERvbSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZG9tXHJcbiAgICB9XHJcbiAgICBnZXRQcm9wKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzXHJcbiAgICB9XHJcblxyXG59XHJcbi8qKlxyXG4gKiB0aGlzIGNsYXNzIGluY2x1ZGUgYSBzZXQgb2YgY29tbW9uIGZ1bmN0aW9uIGZvciBoYW5kbGUgdmlydHVhbCBET01cclxuICogQGF1dGhvciB5aG9uZ21cclxuICovXHJcbmNsYXNzIFJWRG9tVXRpbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YVxyXG4gICAgfVxyXG5cclxuICAgIGdldFZpcnR1YWxFbGVtZW50KGRvbSkge1xyXG4gICAgICAgIGxldCBjaGlsZHJlbiA9IFtdXHJcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgaW4gZG9tLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIGxldCBjYyA9IGRvbS5jaGlsZHJlbltjaGlsZF1cclxuICAgICAgICAgICAgaWYgKGNjIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgIGNjLmZvckVhY2goYyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHYgPSB0aGlzLmdldFZpcnR1YWxFbGVtZW50KGMpXHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaCh2KVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjYyBpbnN0YW5jZW9mIE9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHYgPSB0aGlzLmdldFZpcnR1YWxFbGVtZW50KGNjKVxyXG4gICAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaCh2KVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChjYylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGgoZG9tLnRhZywgZG9tLnByb3BzLCBjaGlsZHJlbilcclxuICAgIH1cclxuICAgIGFwcGx5VHJ1dGhmdWxEYXRhKGRvbSkge1xyXG4gICAgICAgIGlmIChcImZvclwiIGluIGRvbS5wcm9wcykge1xyXG4gICAgICAgICAgICBsZXQgZGF0YUFycmF5ID0gW11cclxuICAgICAgICAgICAgbGV0IGRhdGFTaW5nbGVcclxuXHJcbiAgICAgICAgICAgIGlmIChVdGlsLmlzRm9ySW4oZG9tLnByb3BzWydmb3InXSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChcImNoaWxkRG9tRGF0YWtleVwiIGluIGRvbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFBcnJheSA9IGRvbS5kYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNpbmdsZSA9IGRvbS5jaGlsZERvbURhdGFrZXlcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJkb21EYXRhS2V5XCIgaW4gZG9tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvbS5wcm9wc1snZm9yJ10uc3BsaXQoXCIgX2luXyBcIilbMV0gPT09IGRvbS5kb21EYXRhS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFBcnJheSA9IGRvbS5kYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTaW5nbGUgPSBkb20ucHJvcHNbJ2ZvciddLnNwbGl0KFwiIF9pbl8gXCIpWzBdXHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YUFycmF5ID0gZGF0YVtkb20ucHJvcHNbJ2ZvciddLnNwbGl0KFwiIF9pbl8gXCIpWzFdXVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBkYXRhU2luZ2xlID0gZG9tLnByb3BzWydmb3InXS5zcGxpdChcIiBfaW5fIFwiKVswXVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRoZSBmb3IgZGlyZWN0aXZlIHVzZSBlcnJvclwiKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBvYmpzID0gW11cclxuXHJcbiAgICAgICAgICAgIGRhdGFBcnJheS5mb3JFYWNoKGRhdGEgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBvYmogPSB0aGlzLnZkb20ycmRvbShkb20sIGRhdGEsIGRhdGFTaW5nbGUsIGRhdGEpXHJcblxyXG4gICAgICAgICAgICAgICAgb2Jqcy5wdXNoKG9iailcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICByZXR1cm4gb2Jqc1xyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICBsZXQgZGF0YVxyXG4gICAgICAgICAgICBsZXQgY2hpbGREb21EYXRha2V5XHJcbiAgICAgICAgICAgIGlmIChcImRhdGFcIiBpbiBkb20pIHtcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBkb20uZGF0YVxyXG4gICAgICAgICAgICAgICAgY2hpbGREb21EYXRha2V5ID0gZG9tLmNoaWxkRG9tRGF0YWtleVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGF0YSA9IHRoaXMuZGF0YVxyXG4gICAgICAgICAgICAgICAgY2hpbGREb21EYXRha2V5ID0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBvYmogPSB0aGlzLnZkb20ycmRvbShkb20sIGRhdGEsIGNoaWxkRG9tRGF0YWtleSwgZGF0YSlcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBvYmpcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIHZpcnR1YWwgZG9tIDIgcmVhbCBkYXRhIGRvbVxyXG4gICAgICogQHBhcmFtIHsqfSBkb20gXHJcbiAgICAgKiBAcGFyYW0geyp9IGRhdGEgXHJcbiAgICAgKiBAcGFyYW0geyp9IGRhdGFTaW5nbGUgXHJcbiAgICAgKiBAcGFyYW0geyp9IHRkYXRhIFxyXG4gICAgICovXHJcbiAgICB2ZG9tMnJkb20oZG9tLCBkYXRhLCBkYXRhU2luZ2xlLCB0ZGF0YSkge1xyXG4gICAgICAgIGxldCBvYmogPSB7fVxyXG4gICAgICAgIG9iai50YWcgPSBkb20udGFnXHJcbiAgICAgICAgb2JqLmNoaWxkcmVuID0gW11cclxuICAgICAgICBvYmoucHJvcHMgPSB7fVxyXG4gICAgICAgIGxldCBwcm9wcyA9IE9iamVjdC5rZXlzKGRvbS5wcm9wcylcclxuICAgICAgICBmb3IgKGxldCBwcm9wIGluIHByb3BzKSB7XHJcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IHByb3BzW3Byb3BdXHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJzdHlsZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3R5bGUgPSBkb20ucHJvcHNbdmFsdWVdXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlLmluZGV4T2YoXCIsXCIpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc3R5bGVzID0gc3R5bGUuc3BsaXQoXCIsXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnByb3BzW3ZhbHVlXSA9IHRoaXMuaGFuZGxlQXJyYXlTdHlsZShkYXRhLCBzdHlsZXMsIGRhdGFTaW5nbGUpXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBvYmoucHJvcHNbdmFsdWVdID0gdGhpcy5oYW5kbGVTaW5nbGVTdHlsZShkYXRhLCBzdHlsZSwgZGF0YVNpbmdsZSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChVdGlsLmlzUGxhY2VIb2xkZXIoZG9tLnByb3BzW3ZhbHVlXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIVV0aWwuaXNEb3RPcGVyYXRvckV4cHJlc3Npb24oVXRpbC5nZXRQbGFjZUhvbGRlclZhbHVlKGRvbS5wcm9wc1t2YWx1ZV0pKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmoucHJvcHNbdmFsdWVdID0gdGRhdGFbVXRpbC5nZXRQbGFjZUhvbGRlclZhbHVlKGRvbS5wcm9wc1t2YWx1ZV0pXVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5wcm9wc1t2YWx1ZV0gPSBkYXRhW1V0aWwuZ2V0UGxhY2VIb2xkZXJWYWx1ZShkb20ucHJvcHNbdmFsdWVdKS5zcGxpdChcIi5cIilbMV1dXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChVdGlsLmlzT3BlcmF0b3JFeHByZXNzaW9uKGRvbS5wcm9wc1t2YWx1ZV0pKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG9iai5wcm9wc1t2YWx1ZV0gPSBVdGlsLmdldE9wZXJhdG9yRXhwcmVzc2lvbihkb20ucHJvcHNbdmFsdWVdLCBkYXRhLCBkYXRhU2luZ2xlKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLnByb3BzW3ZhbHVlXSA9IGRvbS5wcm9wc1t2YWx1ZV1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBjaGlsZCBpbiBkb20uY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgaWYgKFV0aWwuaXNTdHJpbmcoZG9tLmNoaWxkcmVuW2NoaWxkXSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChVdGlsLmlzUGxhY2VIb2xkZXIoZG9tLmNoaWxkcmVuW2NoaWxkXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoVXRpbC5nZXRQbGFjZUhvbGRlclZhbHVlKGRvbS5jaGlsZHJlbltjaGlsZF0pLmluZGV4T2YoZGF0YVNpbmdsZSkgPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmNoaWxkcmVuW2NoaWxkXSA9IHRkYXRhW1V0aWwuZ2V0UGxhY2VIb2xkZXJWYWx1ZShkb20uY2hpbGRyZW5bY2hpbGRdKV1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmNoaWxkcmVuW2NoaWxkXSA9IGRhdGFbVXRpbC5nZXRQbGFjZUhvbGRlclZhbHVlKGRvbS5jaGlsZHJlbltjaGlsZF0pLnNwbGl0KFwiLlwiKVsxXV1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmNoaWxkcmVuW2NoaWxkXSA9IGRvbS5jaGlsZHJlbltjaGlsZF1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9tLmNoaWxkcmVuW2NoaWxkXSBpbnN0YW5jZW9mIE9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcImNoaWxkRG9tRGF0YVwiIGluIGRvbS5wcm9wcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb20uY2hpbGRyZW5bY2hpbGRdLmNoaWxkRG9tRGF0YWtleSA9IGRvbS5wcm9wcy5jaGlsZERvbURhdGFcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbS5jaGlsZHJlbltjaGlsZF0uZGF0YSA9IGRhdGFcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFwiZG9tRGF0YVwiIGluIGRvbS5wcm9wcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb20uY2hpbGRyZW5bY2hpbGRdLmRvbURhdGFLZXkgPSBkb20ucHJvcHMuZG9tRGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb20uY2hpbGRyZW5bY2hpbGRdLmRhdGEgPSBkYXRhW2NoaWxkXVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZG9tLmNoaWxkcmVuW2NoaWxkXS5kYXRhID0gZGF0YVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBvYmouY2hpbGRyZW5bY2hpbGRdID0gdGhpcy5hcHBseVRydXRoZnVsRGF0YShkb20uY2hpbGRyZW5bY2hpbGRdKVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2JqXHJcblxyXG4gICAgfVxyXG4gICAgaGFuZGxlU2luZ2xlU3R5bGUoZGF0YSwgc3R5bGUsIGRhdGFTaW5nbGUpIHtcclxuICAgICAgICBsZXQgbmV3U3R5bGUgPSAnJ1xyXG4gICAgICAgIGlmIChkYXRhU2luZ2xlKSB7XHJcbiAgICAgICAgICAgIGlmIChVdGlsLmlzUGxhY2VIb2xkZXIoc3R5bGUpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoVXRpbC5nZXRQbGFjZUhvbGRlclZhbHVlKHN0eWxlKS5pbmRleE9mKGRhdGFTaW5nbGUpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGtleSA9IFV0aWwuZ2V0UGxhY2VIb2xkZXJWYWx1ZShzdHlsZSkuc3BsaXQoXCIuXCIpWzFdXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3U3R5bGUgPSBkYXRhW2tleV1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0eWxlS2V5ID0gc3R5bGUuc3BsaXQoXCI6XCIpWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0eWxlVmFsdWUgPSBzdHlsZS5zcGxpdChcIjpcIilbMV1cclxuICAgICAgICAgICAgICAgICAgICBzdHlsZVZhbHVlID0gZGF0YVtVdGlsLmdldFBsYWNlSG9sZGVyVmFsdWUoc3R5bGVWYWx1ZSldXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3U3R5bGUgPSBzdHlsZUtleSArIFwiOlwiICsgc3R5bGVWYWx1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbmV3U3R5bGUgPSBzdHlsZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGxldCBzdHlsZUtleSA9IHN0eWxlLnNwbGl0KFwiOlwiKVswXVxyXG4gICAgICAgICAgICBsZXQgc3R5bGVWYWx1ZSA9IHN0eWxlLnNwbGl0KFwiOlwiKVsxXVxyXG4gICAgICAgICAgICBpZiAoVXRpbC5pc1BsYWNlSG9sZGVyKHN0eWxlVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICBzdHlsZVZhbHVlID0gZGF0YVtVdGlsLmdldFBsYWNlSG9sZGVyVmFsdWUoc3R5bGVWYWx1ZSldXHJcbiAgICAgICAgICAgICAgICBuZXdTdHlsZSA9IHN0eWxlS2V5ICsgXCI6XCIgKyBzdHlsZVZhbHVlXHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbmV3U3R5bGUgPSBzdHlsZVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3U3R5bGVcclxuICAgIH1cclxuICAgIGhhbmRsZUFycmF5U3R5bGUoZGF0YSwgc3R5bGVzLCBkYXRhU2luZ2xlKSB7XHJcbiAgICAgICAgbGV0IG5ld1N0eWxlQXJyYXkgPSBcIlwiXHJcbiAgICAgICAgZm9yIChsZXQgc3R5bGUgb2Ygc3R5bGVzKSB7XHJcblxyXG4gICAgICAgICAgICBsZXQgbmV3U3R5bGUgPSB0aGlzLmhhbmRsZVNpbmdsZVN0eWxlKGRhdGEsIHN0eWxlLCBkYXRhU2luZ2xlKVxyXG4gICAgICAgICAgICBuZXdTdHlsZUFycmF5ICs9IG5ld1N0eWxlICsgXCI7XCJcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld1N0eWxlQXJyYXlcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFJWIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbikge1xyXG4gICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgZWwsXHJcbiAgICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlXHJcbiAgICAgICAgfSA9IG9wdGlvblxyXG4gICAgICAgIHRoaXMuZWwgPSBlbFxyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGFcclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGVcclxuICAgICAgICB0aGlzLm9ic2VydmVNYXAgPSBuZXcgTWFwKClcclxuICAgICAgICB0aGlzLnBhcnNlID0gbmV3IFlobVBhcnNlKClcclxuICAgICAgICB0aGlzLnJ2RG9tVXRpbCA9IG5ldyBSVkRvbVV0aWwodGhpcy5kYXRhKVxyXG5cclxuXHJcbiAgICB9XHJcbiAgICB1c2UocnZDb21wb25lbnRPYmopIHtcclxuICAgICAgICB0aGlzLnBhcnNlLnVzZUN1c3RvbUNvbXBvbmVudChydkNvbXBvbmVudE9iailcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogcnVuIHJ2XHJcbiAgICAgKi9cclxuICAgIHJ1bigpIHtcclxuICAgICAgICBsZXQgcm9vdCA9IFV0aWwuaXNTdHJpbmcodGhpcy5lbCkgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuZWwpIDogdGhpcy5lbFxyXG4gICAgICAgIGxldCBkb20gPSB0aGlzLl9nZXREb21UcmVlKClcclxuXHJcbiAgICAgICAgLy8gdGhpcy52ZSA9IHRoaXMuZ2V0VmlydHVhbEVsZW1lbnQodGhpcy5hcHBseVRydXRoZnVsRGF0YShkb20pKVxyXG4gICAgICAgIGxldCBydlRoYXQgPSB0aGlzXHJcbiAgICAgICAgdGhpcy5wYXJzZS5jb21wb25ldE1hcC5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25ldCkge1xyXG5cclxuXHJcbiAgICAgICAgICAgIG9ic2VydmUoY29tcG9uZXQuZGF0YSwgY29tcG9uZXQub2JzZXJ2ZU1hcCwgKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGRvbSA9IHJ2VGhhdC5fZ2V0RG9tVHJlZSgpXHJcbiAgICAgICAgICAgICAgICBydlRoYXQuX3VwZGF0ZWRvbShkb20pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGNvbXBvbmV0LndhdGNoT2JqKS5mb3JFYWNoKCh3YXRjaEZ1bikgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgoY29tcG9uZXQub2JzZXJ2ZU1hcC5oYXNLZXkod2F0Y2hGdW4pKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmV0Lm9ic2VydmVNYXAuZ2V0KHdhdGNoRnVuKS5hZGQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb25ldC53YXRjaE9ialt3YXRjaEZ1bl0oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb25ldC5hcHBseVRydXRoRnVsRGF0YSgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgY29tcG9uZXQucnVuKClcclxuXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgdGhpcy52ZSA9IHRoaXMucnZEb21VdGlsLmdldFZpcnR1YWxFbGVtZW50KHRoaXMucnZEb21VdGlsLmFwcGx5VHJ1dGhmdWxEYXRhKGRvbSkpXHJcbiAgICAgICAgdGhpcy53ID0gdGhpcy52ZS5yZW5kZXIoKVxyXG4gICAgICAgIHJvb3QuYXBwZW5kQ2hpbGQodGhpcy53KVxyXG5cclxuICAgICAgICBvYnNlcnZlKHRoaXMuZGF0YSwgdGhpcy5vYnNlcnZlTWFwLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZWRvbShkb20pXHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLl91cGRhdGVkb20oZG9tKVxyXG4gICAgfVxyXG4gICAgX2dldERvbVRyZWUoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5wYXJzZS5wYXJzZUh0bWxUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLnRyaW0oKSlcclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBydiBwYXJzZSBlOiR7ZX1gKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZS5nZXRIdG1sRG9tKClcclxuICAgIH1cclxuICAgIF91cGRhdGVkb20oZG9tKSB7XHJcbiAgICAgICAgbGV0IG52ZSA9IHRoaXMucnZEb21VdGlsLmdldFZpcnR1YWxFbGVtZW50KHRoaXMucnZEb21VdGlsLmFwcGx5VHJ1dGhmdWxEYXRhKGRvbSkpXHJcbiAgICAgICAgd2luZG93Lm52ZSA9IG52ZVxyXG4gICAgICAgIHdpbmRvdy52ZSA9IHRoaXMudmVcclxuICAgICAgICBwYXRjaCh0aGlzLncsIGRpZmYodGhpcy52ZSwgbnZlKSlcclxuICAgICAgICB0aGlzLnZlID0gbnZlXHJcbiAgICB9XHJcbiAgICB3YXRjaChrZXksIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZU1hcC5oYXNLZXkoa2V5KSkge1xyXG4gICAgICAgICAgICB0aGlzLm9ic2VydmVNYXAuZ2V0KGtleSkuYWRkKGNhbGxiYWNrKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIHRoaXMgc3RhdGljIGZ1bmN0aW9uIHVzZSB0byBkZWNsYXJhdGlvbiBhIFJWIGNvbXBvbmVudFxyXG4gICAgICogQHBhcmFtIHsqfSBvcHRpb24gXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjb21wb25lbnQob3B0aW9uKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHsgbmFtZSwgdGVtcGxhdGUsIHByb3BzLCBkYXRhIH0gPSBvcHRpb25cclxuICAgICAgICBsZXQgcGFyc2UgPSBuZXcgWWhtUGFyc2UoKVxyXG4gICAgICAgIHBhcnNlLnBhcnNlSHRtbFRlbXBsYXRlKHRlbXBsYXRlLnRyaW0oKSlcclxuXHJcbiAgICAgICAgbGV0IGRvbSA9IHBhcnNlLmdldEh0bWxEb20oKVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFJ2Q29tcG9uZW50KHsgZG9tOiBkb20sIHByb3BzOiBwcm9wcywgbmFtZTogbmFtZSwgZGF0YTogZGF0YSwgcnVuOiBvcHRpb24ucnVuLCB3YXRjaDogb3B0aW9uLndhdGNoIH0pXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBSViJdLCJzb3VyY2VSb290IjoiIn0=